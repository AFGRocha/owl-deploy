(function(t){function e(e){for(var o,r,n=e[0],l=e[1],c=e[2],d=0,g=[];d<n.length;d++)r=n[d],i[r]&&g.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(g.length)g.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],o=!0,n=1;n<s.length;n++){var l=s[n];0!==i[l]&&(o=!1)}o&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var o={},i={app:0},a=[];function r(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=o,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(s,o,function(e){return t[e]}.bind(null,o));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var o=s("64a9"),i=s.n(o);i.a},"0849":function(t,e,s){},"0a91":function(t,e,s){"use strict";var o=s("58a6"),i=s.n(o);i.a},"10a0":function(t,e,s){"use strict";var o=s("b9bd"),i=s.n(o);i.a},"14df":function(t,e,s){},"1bf7":function(t,e,s){},"209a":function(t,e,s){"use strict";var o=s("14df"),i=s.n(o);i.a},"2a37":function(t,e,s){"use strict";var o=s("0849"),i=s.n(o);i.a},"3a6b":function(t,e,s){},"4e38":function(t,e,s){},"4fae":function(t,e,s){"use strict";var o=s("5e11"),i=s.n(o);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var o=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{attrs:{id:"nav"}}),s("router-view")],1)},a=[],r={},n=r,l=(s("034f"),s("2877")),c=Object(l["a"])(n,i,a,!1,null,null,null),u=c.exports,d=s("8c4f"),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("Header"),-1==t.userLoggedIn?s("header",{attrs:{id:"home"}},[s("div",{staticClass:"row marginSides",staticStyle:{height:"600px"}},[t._m(0),s("div",{staticClass:"col-12",attrs:{id:"showMobile"}},[s("h2",[t._v("Descubra o que o Owl tem para si!")]),s("p",[t._v("Owl fornece uma vasta libraria, veja o nosso catálogo!")]),s("div",[s("router-link",{attrs:{to:{name:"catalog"}}},[s("button",{staticClass:"btn btn-owl"},[t._v("Ver catálogo")])])],1)]),s("div",{staticClass:"col-12 col-md-6",staticStyle:{"padding-top":"200px"},attrs:{id:"showPC"}},[s("h2",[t._v("Descubra o que o Owl tem para si!")]),s("p",[t._v("Owl fornece uma vasta libraria, veja o nosso catálogo!")]),s("div",[s("router-link",{attrs:{to:{name:"catalog"}}},[s("button",{staticClass:"btn btn-owl"},[t._v("Ver catálogo")])])],1)]),t._m(1)])]):t._e(),-1!=t.userLoggedIn?s("div",{staticClass:"marginSides mt-4"},[s("div",{staticClass:"col-12"},[t._m(2),s("div",{staticClass:"boxContent",attrs:{id:"margin"}},[0==t.recommended.length?s("div",[s("br"),s("h4",[t._v("Não existem livros recomendados.")]),s("br")]):t._e(),s("div",{staticClass:"row"},t._l(t.recommended.slice(0,4),function(e){return s("div",{key:e.bookId,staticClass:"col-12 col-sm-6 col-xl-3 col-lg-4"},[s("router-link",{attrs:{to:{name:"book",params:{id:e._id}}},nativeOn:{mouseover:function(s){t.clickBook(e._id)},click:function(s){t.addView(e.bookId)}}},[s("img",{staticClass:"owlCoversTop mt-4 mb-4",attrs:{src:e.cover}})])],1)}))])])]):t._e(),s("div",{staticClass:"margin5 mt-4"},[s("div",{staticClass:"col-12"},[t._m(3),s("div",{staticClass:"boxContent",attrs:{id:"margin"}},[s("div",{staticClass:"row"},t._l(t.mostViews.slice(0,4),function(e){return s("div",{key:e.bookId,staticClass:"col-12 col-sm-6 col-xl-3 col-lg-4"},[s("router-link",{attrs:{to:{name:"book",params:{id:e._id}}},nativeOn:{mouseover:function(s){t.clickBook(e._id)},click:function(s){t.addView(e.bookId)}}},[s("img",{staticClass:"owlCoversTop mt-4 mb-4",attrs:{src:e.cover}})])],1)}))])])]),s("Footer")],1)},h=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12",attrs:{id:"showMobile"}},[s("img",{staticStyle:{"padding-top":"30px"},attrs:{src:"https://cdn.discordapp.com/attachments/373524098954821632/578234339976937492/books.png",id:"mobileSize"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-6",attrs:{id:"showPC"}},[s("img",{staticStyle:{"padding-top":"30px"},attrs:{src:"https://cdn.discordapp.com/attachments/373524098954821632/578234339976937492/books.png"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"boxTitle"},[s("h3",{attrs:{id:"title"}},[t._v("Recomendados")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"boxTitle"},[s("h3",{attrs:{id:"title"}},[t._v("Mais Populares")])])}],m=(s("55dd"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("nav",{staticClass:"navbar navbar-light bg-light alignLeft",attrs:{id:"navbar1"}},[o("router-link",{attrs:{to:{name:"home"}}},[o("img",{staticClass:"navbar-brand",attrs:{src:s("cf05"),alt:"",id:"logo"}})]),o("ul",{staticClass:"navbar-nav ml-auto"},[o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link",attrs:{to:{name:"profile"},id:"pc"}},[-1!=t.userLoggedIn?o("div",{staticStyle:{color:"white"}},[o("i",{staticClass:"fas fa-user fa-2x mr-2"}),o("h4",[t._v(t._s(t.userName))])]):t._e()])],1)]),o("router-link",{staticClass:"nav-link",attrs:{to:{name:"users"},id:"pc"}},[-1!=t.userLoggedIn&&"admin"==t.type?o("i",{staticClass:"fas fa-cog fa-2x",staticStyle:{color:"white"}}):t._e()])],1),o("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light",attrs:{id:"navbarNav"}},[o("b-navbar-toggle",{staticClass:"ml-auto",attrs:{target:"nav-collapse",id:"white"}},[o("i",{staticClass:"fas fa-bars"})]),o("b-collapse",{staticClass:"alignLeft",attrs:{id:"nav-collapse","is-nav":""}},[o("ul",{staticClass:"navbar-nav alignLeft"},[o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link a",attrs:{to:{name:"home"},color:"white"}},[t._v("Home")])],1),o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link a",attrs:{to:{name:"catalog"}}},[t._v("Catalogo")])],1),o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link a",attrs:{to:{name:"rankings"}}},[t._v("Rankings")])],1),-1!=t.userLoggedIn?o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link a",attrs:{to:{name:"suggest"}}},[t._v("Sugerir Livro")])],1):t._e(),-1!=t.userLoggedIn?o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link a",attrs:{to:{name:"achievements"}}},[t._v("Conquistas")])],1):t._e(),-1!=t.userLoggedIn?o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link a",attrs:{to:{name:"profile"},id:"mobile"}},[o("i",{staticClass:"fas fa-user"}),t._v("\n          "+t._s(t.userName)+"\n        ")])],1):t._e(),-1!=t.userLoggedIn&&"admin"==t.type?o("li",{staticClass:"nav-item",attrs:{id:"mobile"}},[o("router-link",{staticClass:"nav-link a",attrs:{to:{name:"users"}}},[o("i",{staticClass:"fas fa-cog",staticStyle:{color:"white"}}),t._v("\n          Back Office\n        ")])],1):t._e(),o("li",{staticClass:"nav-item"},[-1==t.userLoggedIn?o("router-link",{staticClass:"nav-link a",attrs:{id:"right",to:{name:"login"}}},[t._v("LogIn")]):t._e()],1),o("li",{staticClass:"nav-item"},[-1==t.userLoggedIn?o("router-link",{staticClass:"nav-link a",attrs:{to:{name:"signup"}}},[t._v("SignUp")]):t._e()],1),o("li",{staticClass:"nav-item"},[-1!=t.userLoggedIn?o("a",{staticClass:"nav-link a",attrs:{href:""},on:{click:t.logout}},[t._v("Logout")]):t._e()]),-1!=t.userLoggedIn?o("li",{staticClass:"nav-item"},[o("div",{staticClass:"dropdown"},[o("a",{staticClass:"btn dropdown-toggle darkBrown a",attrs:{id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[o("i",{staticClass:"fas fa-bell"})]),o("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},t._l(t.notifications,function(e,s){return o("div",{key:s,staticClass:"ml-2 mr-2"},[o("h6",[t._v(t._s(e))]),o("div",{staticClass:"dropdown-divider"})])}))])]):t._e()])])],1)])}),v=[],p=(s("ac6a"),s("bc3a")),f=s.n(p),b={data:function(){return{userLoggedIn:localStorage.getItem("userLoggedIn"),users:[],userName:"",type:"",notifications:[],reviews:[],requisitions:[],books:[]}},created:function(){var t=this;f.a.get("https://owl-server-pw2.herokuapp.com/users").then(function(e){t.users=e.data,t.getUser()}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/books").then(function(e){t.books=e.data}).catch(function(t){console.log(t)}),-1!=this.userLoggedIn&&f.a.get("https://owl-server-pw2.herokuapp.com/requisitions?userId="+this.userLoggedIn).then(function(e){t.requisitions=e.data,t.requisitions.forEach(function(e){if(t.userLoggedIn==e.userId&&1==e.active){var s=new Date(e.requisitionDate).getDate(),o=(new Date).getDate();if(s+5<o){var i="",a=o-s-5;t.books.forEach(function(t){e.bookId==t._id&&(i=t.title)}),t.notifications.push("A sua entrega do livro ".concat(i," está em atraso ").concat(a," dias."))}else if(s+2>=o&&s+1<=o){var r="",n=s+3-o;t.books.forEach(function(t){e.bookId==t._id&&(r=t.title)}),t.notifications.push("Faltam ".concat(n," dias para acabar o tempo da requisição do livro ").concat(r,".")),console.log(t.notifications)}}})}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/reviews").then(function(e){t.reviews=e.data,t.reviews.forEach(function(e){if(t.userLoggedIn==e.userId){var s="",o="",i="";t.reviews.forEach(function(a){e.bookId==a.bookId&&a.userId!=t.userLoggedIn&&(t.books.forEach(function(t){e.bookId==t._id&&(i=t.title)}),t.users.forEach(function(t){a.userId==t._id&&(console.log("Hey"),o=t.firstName)}),s="".concat(o," tambem fez uma review ao livro ").concat(i,"."))}),s&&t.notifications.push(s),console.log(t.notifications)}})}).catch(function(t){console.log(t)})},methods:{getNotifications:function(){},logout:function(){localStorage.setItem("userLoggedIn",-1)},getUser:function(){for(var t=0;t<this.users.length;t++)this.users[t]._id==this.userLoggedIn&&(this.userName=this.users[t].firstName+" "+this.users[t].lastName[0]+".",this.type=this.users[t].type)}},computed:{}},_=b,k=(s("ae14"),Object(l["a"])(_,m,v,!1,null,"3dcbc92d",null)),w=k.exports,C=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},I=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("br"),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12 col-md-4 col-lg-4"},[s("a",{attrs:{href:"https://www.ipp.pt/"}},[s("img",{attrs:{src:"https://www.esmad.ipp.pt/logo_pporto_branco.png",width:"200"}})])]),s("div",{staticClass:"col-sm-12 col-md-4 col-lg-4"},[s("p",[t._v("Escola Superior de Media Artes e Design ")]),s("p",[t._v("Rua D. Sancho I, n.º 981")]),s("p",[t._v("4480-876 Vila do Conde")]),s("p",[t._v("Portugal")]),s("p",[t._v("T. +351 252 291 700")]),s("p",[t._v("E. geral@esmad.ipp.pt")])]),s("div",{staticClass:"col-sm-12 col-md-4 col-lg-4"},[s("p",[t._v("ESMAD © 2019")]),s("p",[t._v("Owl © 2019")]),s("a",{attrs:{href:"https://moodle.esmad.ipp.pt/mdl1819/?redirect=0"}},[s("p",[t._v("Moodle")])])])])])])}],y={data:function(){return{userLoggedIn:localStorage.getItem("userLoggedIn"),users:this.$store.state.users,userName:""}},created:function(){null==localStorage.getItem("userLoggedIn")&&localStorage.setItem("userLoggedIn",-1),this.userName=this.getUser()},methods:{logout:function(){localStorage.setItem("userLoggedIn",-1)},getUser:function(){for(var t=0;t<this.users.length;t++)this.users[t].userId==this.userLoggedIn&&(this.userName=this.users[t].firstName+" "+this.users[t].lastName[0]+".");return this.userName}},computed:{}},T=y,x=(s("760c"),Object(l["a"])(T,C,I,!1,null,null,null)),D=x.exports,S={name:"home",components:{Header:w,Footer:D},data:function(){return{userLoggedIn:localStorage.getItem("userLoggedIn"),users:[],books:[],recommended:[],mostViews:[],userTags:[],clickedBook:0}},created:function(){var t=this;f.a.get("https://owl-server-pw2.herokuapp.com/users").then(function(e){t.users=e.data,console.log("users:"),console.log(t.users);for(var s=0;s<t.users.length;s++)t.users[s]._id==t.userLoggedIn&&(t.userTags=t.users[s].favTags);console.log(t.userTags)}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/books").then(function(e){t.books=e.data,t.mostViews=t.books.sort(function(t,e){return t.nViews>e.nViews?-1:t.nViews<e.nViews?1:0});for(var s=0;s<t.books.length;s++)for(var o=0;o<t.books[s].idTag.length;o++)for(var i=0;i<t.userTags.length;i++){if(t.recommended.length>=4)break;t.books[s].idTag[o]==t.userTags[i]&&(t.recommended.push(t.books[s]),t.recommended[s]==t.recommended[s+1]&&t.recommended.splice(s+1,1))}console.log(t.mostViews),console.log(t.books)}).catch(function(t){console.log(t)}),console.log("userLoggedIn: "+this.userLoggedIn)},methods:{getTop2:function(){this.top2=this.books2.sort(function(t,e){return t.nViews>e.nViews?-1:t.nViews<e.nViews?1:0})},clickBook:function(t){for(var e=0;e<this.books.length;e++)this.books[e].bookId===t&&(this.$store.dispatch("open_book",e),this.clickedBook=e)},addView:function(t){console.log("entrou");for(var e=0;e<this.books.length;e++)this.books[e].bookId===t&&(this.$store.dispatch("add_view",e),console.log("oi"))}}},N=S,E=(s("4fae"),Object(l["a"])(N,g,h,!1,null,"060c6a9a",null)),B=E.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("Header"),s("div",{staticClass:"margin5 mt-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-lg-3 col-md-12"},[s("div",{staticClass:"boxTitle"},[s("div",{staticClass:"row"},[t._m(0),s("div",{staticClass:"ml-auto mr-4 mt-1"},[t.windowWidth<=990?s("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{id:"collapse"}},[s("i",{staticClass:"fas fa-chevron-down fa-lg"})]):t._e()])])]),s("b-collapse",{attrs:{visible:"",id:"collapse-1"}},[s("div",{staticClass:"boxContent alignLeft",attrs:{id:"margin"}},[s("label",{attrs:{for:"filterName"}},[t._v("Por Titulo:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.titleFilter,expression:"titleFilter"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.titleFilter},on:{input:function(e){e.target.composing||(t.titleFilter=e.target.value)}}}),s("label",{staticClass:"mt-2",attrs:{for:"filterAuthors"}},[t._v("Por Autor:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.authorFilter,expression:"authorFilter"}],staticClass:"form-control",attrs:{id:"filterAuthors"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.authorFilter=e.target.multiple?s:s[0]}}},[s("option",[t._v("Todos")]),t._l(t.authors,function(e,o){return s("option",{key:o},[t._v(t._s(e))])})],2),s("label",{staticClass:"mt-2",attrs:{for:"filterPublisher"}},[t._v("Por Editora:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.publisherFilter,expression:"publisherFilter"}],staticClass:"form-control",attrs:{id:"filterPublisher"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.publisherFilter=e.target.multiple?s:s[0]}}},[s("option",[t._v("Todos")]),t._l(t.publishers,function(e,o){return s("option",{key:o},[t._v(t._s(e))])})],2),s("label",{staticClass:"mt-2",attrs:{for:"filterTag"}},[t._v("Por Tag:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.tagFilter,expression:"tagFilter"}],staticClass:"form-control",attrs:{id:"filterTag"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.tagFilter=e.target.multiple?s:s[0]}}},[s("option",[t._v("Todos")]),t._l(t.tags,function(e,o){return s("option",{key:o},[t._v(t._s(e.tagDescription))])})],2),s("br"),s("button",{staticClass:"btn btn-lg btn-block buttonColor",attrs:{id:"btnLogin"},on:{click:t.filterBooks}},[t._v("Filtrar")])])])],1),s("div",{staticClass:"col-12 col-lg-9 mt-4 mt-lg-0"},[s("div",{staticClass:"boxTitle"},[s("div",{staticClass:"row"},[t._m(1),s("div",{staticClass:"ml-auto",attrs:{id:"ordenarPC"}},[s("form",{staticClass:"form-inline"},[s("label",[t._v("Ordenar por:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.orderTab,expression:"orderTab"}],staticClass:"form-control ml-2 mr-4",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.orderTab=e.target.multiple?s:s[0]},t.sortBooks]}},[s("option",[t._v("Mais Populares")]),s("option",[t._v("Menos Populares")]),s("option",[t._v("Alfabetico (Por Titulo)")]),s("option",[t._v("Alfabetico (Por Autor)")])])])])])]),s("div",{staticClass:"boxContent",attrs:{id:"margin"}},[s("div",{staticClass:"ml-auto",attrs:{id:"ordenarMobile"}},[s("form",{staticClass:"form-inline"},[s("label",[t._v("Ordenar por:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.orderTab,expression:"orderTab"}],staticClass:"form-control ml-2 mr-4",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.orderTab=e.target.multiple?s:s[0]},t.sortBooks]}},[s("option",[t._v("Mais Populares")]),s("option",[t._v("Menos Populares")]),s("option",[t._v("Alfabetico (Por Titulo)")]),s("option",[t._v("Alfabetico (Por Autor)")])])])]),s("div",{staticClass:"row"},t._l(t.filteredBooks,function(e){return s("div",{key:e.bookId,staticClass:"col-6 col-sm-4 col-xl-3"},[s("router-link",{attrs:{to:{name:"book",params:{id:e._id}}},nativeOn:{mouseover:function(s){t.clickBook(e._id)},click:function(s){t.addView(e.bookId)}}},[s("img",{staticClass:"owlCovers mt-3",attrs:{src:e.cover}})]),s("h6",{staticClass:"mt-2"},[t._v(t._s(e.title))]),s("h6",[t._v(t._s(e.author))]),1==e.availability?s("p",[t._v("Disponivel")]):s("p",[t._v("Indisponivel")])],1)}))])])])]),s("Footer")],1)},L=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2"},[s("h3",{attrs:{id:"filterTitle"}},[t._v("Filtros")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2"},[s("h3",{attrs:{id:"catalogTitle"}},[t._v("Catalogo")])])}],A=(s("6762"),s("2fdb"),{components:{Header:w,Footer:D},data:function(){return{books:[],tags:[],publishers:[],authors:[],titleFilter:"",filteredBooks:[],authorFilter:"Todos",publisherFilter:"Todos",tagFilter:"Todos",clickedBook:0,orderTab:"",windowWidth:0,window:null}},created:function(){var t=this;window.addEventListener("resize",this.handleResize),this.handleResize(),f.a.get("https://owl-server-pw2.herokuapp.com/books").then(function(e){t.books=e.data,t.filteredBooks=e.data;for(var s=0;s<t.books.length;s++)-1==t.authors.indexOf(t.books[s].author)&&t.authors.push(t.books[s].author);for(var o=0;o<t.books.length;o++)-1==t.publishers.indexOf(t.books[o].publisher)&&t.publishers.push(t.books[o].publisher)}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/tags").then(function(e){t.tags=e.data}).catch(function(t){console.log(t)})},methods:{clickBook:function(t){this.$store.dispatch("open_book",t),this.clickedBook=t},addView:function(t){console.log("entrou");for(var e=0;e<this.books.length;e++)this.books[e].bookId===t&&(this.$store.dispatch("add_view",e),console.log("oi"))},sortBooks:function(){"Alfabetico (Por Titulo)"==this.orderTab&&this.filteredBooks.sort(function(t,e){return t.title<e.title?-1:t.title>e.title?1:0}),"Alfabetico (Por Autor)"==this.orderTab&&this.filteredBooks.sort(function(t,e){return t.author<e.author?-1:t.author>e.author?1:0}),"Mais Populares"==this.orderTab&&this.filteredBooks.sort(function(t,e){return t.nViews>e.nViews?-1:t.nViews<e.nViews?1:0}),"Menos Populares"==this.orderTab&&this.filteredBooks.sort(function(t,e){return t.nViews<e.nViews?-1:t.nViews>e.nViews?1:0})},filterBooks:function(){var t=this;console.log(this.filteredBooks),this.filteredBooks=[];for(var e=!1,s=[],o=[],i=0;i<this.books.length;i++){var a=this.books[i].title.toUpperCase(),r=this.titleFilter.toUpperCase();console.log(),e=a.includes(r),e&&o.push(this.books[i])}if(this.filteredBooks=o,console.log("depois:"),console.log(this.filteredBooks),this.filteredBooks=this.filteredBooks.filter(function(e){return e.author===t.authorFilter||"Todos"==t.authorFilter}),this.filteredBooks=this.filteredBooks.filter(function(e){return e.publisher===t.publisherFilter||"Todos"==t.publisherFilter}),"Todos"!=this.tagFilter){for(var n=0;n<this.filteredBooks.length;n++)for(var l=0;l<this.filteredBooks[n].idTag.length;l++)for(var c=0;c<this.tags.length;c++)this.filteredBooks[n].idTag[l]==this.tags[c]._id&&this.tags[c].tagDescription==this.tagFilter&&s.push(this.filteredBooks[n]);this.filteredBooks=s}console.log(this.filteredBooks),console.log("searched title: "+this.titleFilter)},handleResize:function(){this.windowWidth=window.innerWidth}},computed:{}}),R=A,O=(s("fa59"),Object(l["a"])(R,q,L,!1,null,"43487020",null)),P=O.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("Header"),s("div",{staticClass:"margin5 mt-4"},[s("div",{staticClass:"col-12"},[t._m(0),s("div",{staticClass:"boxContent alignLeft",attrs:{id:"margin"}},t._l(t.users,function(e){return s("div",{key:e.userId},[e.userId==t.userLoggedIn?s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-6 col-lg-3 "},[0==t.clicked?s("img",{attrs:{src:e.photo,height:"200",width:"250",alt:"",id:"profilePhoto"}}):t._e(),t.clicked?s("input",{directives:[{name:"model",rawName:"v-model",value:e.photo,expression:"user.photo"}],staticClass:"form-control editInput col-9 mt-5 col-lg-7 mb-2",attrs:{type:"text"},domProps:{value:e.photo},on:{input:function(s){s.target.composing||t.$set(e,"photo",s.target.value)}}}):t._e()]),s("div",{staticClass:"col-12 col-lg-4 col-md-3"},[s("h4",{staticClass:"mt-4 mt-sm-0"},[t._v("Nome de Utilizador")]),0==t.clicked?s("p",[t._v(t._s(e.firstName)+" "+t._s(e.lastName))]):t._e(),s("div",{staticClass:"row"},[t.clicked?s("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"user.firstName"}],staticClass:"form-control editInput col-4 col-lg-3 mb-1 ml-3",attrs:{type:"text"},domProps:{value:e.firstName},on:{input:function(s){s.target.composing||t.$set(e,"firstName",s.target.value)}}}):t._e(),t.clicked?s("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"user.lastName"}],staticClass:"form-control editInput col-4 col-lg-3 ml-1 mb-2",attrs:{type:"text"},domProps:{value:e.lastName},on:{input:function(s){s.target.composing||t.$set(e,"lastName",s.target.value)}}}):t._e()]),s("h4",[t._v("Email")]),0==t.clicked?s("p",[t._v(t._s(e.email))]):t._e(),t.clicked?s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"user.email"}],staticClass:"form-control editInput col-9 col-lg-7 mb-2",attrs:{type:"text"},domProps:{value:e.email},on:{input:function(s){s.target.composing||t.$set(e,"email",s.target.value)}}}):t._e(),s("a",{staticClass:"btn btn-dark mt-1",attrs:{id:"btnEdit"},on:{click:t.editProfile}},[s("i",{staticClass:"fas fa-edit"}),t._v(" Editar perfil\n                ")])]),s("div",{staticClass:"col-12 col-md-4  alignRight"},[0==t.clicked?s("div",[s("h4",{staticClass:" "},[t._v("Tags Favoritas")]),s("ul",t._l(t.testes,function(e){return s("li",{key:e,staticClass:"text-left "},[t._v(t._s(e))])}))]):t._e(),t.clicked?s("div",[s("h4",{staticClass:"mt-md-4 mt-sm-4"},[t._v("Tags Favoritas")]),s("div",{staticClass:"scrollbox"},t._l(t.tags,function(e,o){return s("p",{key:e},[s("input",{attrs:{id:o,type:"checkbox"},domProps:{value:o}}),t._v("\n                      "+t._s(e.tagDescription)+"\n                    ")])}))]):t._e()])])]):t._e()])}))])]),s("Footer")],1)},F=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"boxTitle"},[s("h3",{attrs:{id:"title"}},[t._v("Perfil")])])}],$=(s("6b54"),s("3d20")),M=s.n($),U={components:{Header:w,Footer:D},data:function(){return{users:[],userLoggedIn:localStorage.getItem("userLoggedIn"),requisitions:[],books:[],clicked:!1,user:{firstName:"",lastName:"",email:"",favTags:[],photo:""},tags:[],testes:[],testes2:[],clickedBook:0}},created:function(){var t=this;f.a.get("http://localhost:3000/users").then(function(e){t.users=e.data,console.log("users:"),console.log(t.users);for(var s=0;s<t.users.length;s++)t.users[s]._id==t.userLoggedIn&&(t.testes=t.users[s].favTags,console.log(t.testes))}).catch(function(t){console.log(t)}),f.a.get("http://localhost:3000/tags").then(function(e){t.tags=e.data,console.log("tags:"),console.log(t.tags);for(var s=0;s<t.tags.length;s++)for(var o=0;o<t.testes.length;o++)t.tags[s]._id==t.testes[o]&&t.testes2.push(t.tags[s].tagDescription)}).catch(function(t){console.log(t)}),f.a.get("http://localhost:3000/books").then(function(e){t.books=e.data,console.log("books:"),console.log(t.books)}).catch(function(t){console.log(t)}),console.log(this.userLoggedIn),f.a.get("http://localhost:3000/requisitions?userId="+this.userLoggedIn).then(function(e){t.requisitions=e.data,console.log("requisitions:"),console.log(t.requisitions)}).catch(function(t){console.log(t)})},updated:function(){this.checkCheckboxes()},methods:{deliverBook:function(t,e){for(var s=this,o=0;o<this.requisitions.length;o++)if(this.requisitions[o].bookId==t&&this.requisitions[o].userId==e&&1==this.requisitions[o].active){var i=new Date,a=i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()+" "+i.getHours()+":"+i.getMinutes();f.a.put("http://localhost:3000/requisitions/"+this.requisitions[o]._id,{deliveryDate:a}).then(function(t){console.log(t),s.checkRequesition(s.clickedBook,s.loggedUser)}).catch(function(t){console.log(t)}),M()({type:"success",title:"Livro entregado com sucesso."}),this.requisitions[o].active=!1}},editProfile:function(){if(this.clicked){this.clicked=!1;for(var t=0;t<this.users.length;t++)if(this.users[t]._id==this.userLoggedIn){this.user.firstName=this.users[t].firstName,this.user.lastName=this.users[t].lastName,this.user.email=this.users[t].email,this.user.photo=this.users[t].photo;var e="http://localhost:3000/users/"+this.users[t]._id;f.a.put(e,{firstName:this.user.firstName,lastName:this.user.lastName,email:this.user.email,photo:this.user.photo}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}this.testes=[],this.testes2=[],this.user.favTags=[];for(var s=0;s<this.tags.length;s++)console.log("entrou no for do coiso"),document.getElementById(s.toString()).checked&&(console.log("entrou no if do coiso"),this.testes.push(this.tags[s].tagDescription),this.user.favTags.push(this.tags[s]._id),console.log(this.user.favTags));var o="http://localhost:3000/users/"+this.userLoggedIn;f.a.put(o,{favTags:this.user.favTags}).then(function(t){console.log("entrou edit tags"),console.log(t)}).catch(function(t){console.log(t)});for(var i=0;i<this.users.length;i++)this.users[i]._id==this.userLoggedIn&&(this.testes=this.user.favTags);for(var a=0;a<this.tags.length;a++)for(var r=0;r<this.testes.length;r++)this.tags[a]._id==this.testes[r]&&this.testes2.push(this.tags[a].tagDescription)}else this.clicked=!0},checkCheckboxes:function(){if(this.clicked){this.user.favTags=this.testes2,console.log(this.user.favTags);for(var t=0;t<this.tags.length;t++)for(var e=0;e<this.user.favTags.length;e++)this.tags[t].tagDescription==this.user.favTags[e]&&(document.getElementById(t.toString()).checked=!0)}},clickBook:function(t){for(var e=0;e<this.books.length;e++)this.books[e].bookId===t&&(this.$store.dispatch("open_book",e),this.clickedBook=e)},seeCover:function(t){M()({title:"Capa",text:t,html:'<img src="'+t+'" alt="" class="coverSize">',showConfirmButton:!0})}},computed:{}},j=U,H=(s("fab9"),Object(l["a"])(j,V,F,!1,null,null,null)),z=H.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"book"},[s("Header"),s("div",{staticClass:"margin5 mt-4"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-3"},[s("img",{staticClass:"img-thumbnail rounded img-fluid margin5 bookCoverBig float-left ml-4 mt-4",attrs:{src:t.book[0].cover,alt:""}})]),s("div",{staticClass:"col-12 col-md-9"},[s("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[s("h1",{staticClass:"bookInforHeaders alignLeft font-weight-bold"},[t._v(t._s(t.book[0].title))])]),s("div",{staticClass:"row"},[s("h4",{staticClass:"bookInforHeaders alignLeft"},[t._v(t._s(t.book[0].author))])]),s("div",{staticClass:"alignLeft"},[t.bookRating>0?s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}):t._e(),t.bookRating<1?s("i",{staticClass:"fas fa-star",staticStyle:{color:"lightgrey"}}):t._e(),t.bookRating>1?s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}):t._e(),t.bookRating<2?s("i",{staticClass:"fas fa-star",staticStyle:{color:"lightgrey"}}):t._e(),t.bookRating>2?s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}):t._e(),t.bookRating<3?s("i",{staticClass:"fas fa-star",staticStyle:{color:"lightgrey"}}):t._e(),t.bookRating>3?s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}):t._e(),t.bookRating<4?s("i",{staticClass:"fas fa-star",staticStyle:{color:"lightgrey"}}):t._e(),t.bookRating>4?s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}):t._e(),t.bookRating<5?s("i",{staticClass:"fas fa-star",staticStyle:{color:"lightgrey"}}):t._e()]),s("div",{staticClass:"row mt-4"},[s("h4",{staticClass:"alignLeft bookInforHeaders"},[s("b",[t._v("Editora:")]),t._v("\n                "+t._s(t.book[0].publisher)+"\n              ")])]),s("div",{staticClass:"row mt-4"},[s("h4",{staticClass:"alignLeft bookInforHeaders font-weight-bold"},[t._v("Sinopse")]),s("p",{staticClass:"mr-4",staticStyle:{"text-align":"left"}},[t._v(t._s(t.book[0].description))])]),s("div",{staticClass:"row"},[-1!=this.loggedUser?s("button",{staticClass:"btn buttonColor float-right",attrs:{disabled:0==t.buttonActive},on:{click:function(e){t.requesition(t.pageBookId,t.loggedUser)}}},[t._v(t._s(t.buttonText))]):t._e(),0==this.buttonActive?s("button",{staticClass:"btn-primary rounded",on:{click:function(e){t.notification(t.clickedBook,t.loggedUser)}}},[s("i",{staticClass:"fas fa-bell"})]):t._e()])])])])])]),s("div",{staticClass:"margin5 mt-4"},[t._m(1),-1!=t.loggedUser&&0==t.reviewCheck?s("div",{staticClass:"row"},[s("div",{staticClass:"form-group boxContent col-12 col-md-12"},[s("div",{staticClass:"margin5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"row"},[s("label",{staticClass:"font-weight-bold ml-3",staticStyle:{"font-size":"20px"},attrs:{for:"comment"}},[t._v("Comment:")]),s("fieldset",{staticClass:"rate ml-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.picked,expression:"picked"}],staticClass:"starInput",attrs:{id:"rate1-star5",type:"radio",name:"rate1",value:"5"},domProps:{checked:t._q(t.picked,"5")},on:{change:function(e){t.picked="5"}}}),s("label",{staticClass:"star",attrs:{for:"rate1-star5",title:"Excellent"}},[t._v("5")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.picked,expression:"picked"}],staticClass:"starInput",attrs:{id:"rate1-star4",type:"radio",name:"rate1",value:"4"},domProps:{checked:t._q(t.picked,"4")},on:{change:function(e){t.picked="4"}}}),s("label",{staticClass:"star",attrs:{for:"rate1-star4",title:"Good"}},[t._v("4")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.picked,expression:"picked"}],staticClass:"starInput",attrs:{id:"rate1-star3",type:"radio",name:"rate1",value:"3"},domProps:{checked:t._q(t.picked,"3")},on:{change:function(e){t.picked="3"}}}),s("label",{staticClass:"star",attrs:{for:"rate1-star3",title:"Satisfactory"}},[t._v("3")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.picked,expression:"picked"}],staticClass:"starInput",attrs:{id:"rate1-star2",type:"radio",name:"rate1",value:"2"},domProps:{checked:t._q(t.picked,"2")},on:{change:function(e){t.picked="2"}}}),s("label",{staticClass:"star",attrs:{for:"rate1-star2",title:"Bad"}},[t._v("2")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.picked,expression:"picked"}],staticClass:"starInput",attrs:{id:"rate1-star1",type:"radio",name:"rate1",value:"1"},domProps:{checked:t._q(t.picked,"1")},on:{change:function(e){t.picked="1"}}}),s("label",{staticClass:"star",attrs:{for:"rate1-star1",title:"Very bad"}},[t._v("1")])])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reviewArea,expression:"reviewArea"}],staticClass:"form-control",attrs:{rows:"5",id:"comment"},domProps:{value:t.reviewArea},on:{input:function(e){e.target.composing||(t.reviewArea=e.target.value)}}}),s("button",{staticClass:"btn buttonColor col-6 mt-3",staticStyle:{margin:"auto"},on:{click:function(e){t.doReview(t.pageBookId,t.loggedUser)}}},[t._v("Publicar")])])])])]):t._e(),s("div",{staticClass:"row boxContent"},t._l(t.reviews,function(e){return s("div",{key:e._id,staticClass:"col-12 col-md-12"},[[s("div",{staticClass:"col-3"},[s("img",{staticClass:"img-thumbnail rounded img-fluid margin5 bookCoverBig float-left ml-4 mt-4",attrs:{src:t.getInfoFromUser(e.userId).photo,alt:""}})]),s("div",{staticClass:"col-9"},[s("div",{staticClass:"row mt-4"},[s("h3",[t._v(t._s(t.getInfoFromUser(e.userId).firstName)+" "+t._s(t.getInfoFromUser(e.userId).lastName))]),s("h6",{staticClass:"ml-5"},[t._v(t._s(e.date))])]),s("div",{staticClass:"row"},[s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}),e.rating>1?s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}):t._e(),e.rating<2?s("i",{staticClass:"fas fa-star",staticStyle:{color:"lightgrey"}}):t._e(),e.rating>2?s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}):t._e(),e.rating<3?s("i",{staticClass:"fas fa-star",staticStyle:{color:"lightgrey"}}):t._e(),e.rating>3?s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}):t._e(),e.rating<4?s("i",{staticClass:"fas fa-star",staticStyle:{color:"lightgrey"}}):t._e(),e.rating>4?s("i",{staticClass:"fas fa-star",staticStyle:{color:"gold"}}):t._e(),e.rating<5?s("i",{staticClass:"fas fa-star",staticStyle:{color:"lightgrey"}}):t._e()]),s("div",{staticClass:"row mt-4"},[0==t.verifyEdit||e._id!=t.editThatOne?s("p",[t._v(t._s(e.comment))]):t._e(),1==t.verifyEdit&&e._id==t.editThatOne?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"review.comment"}],attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:e.comment},on:{input:function(s){s.target.composing||t.$set(e,"comment",s.target.value)}}}):t._e()]),s("div",{staticClass:"row"},[-1!=t.loggedUser?s("button",{staticClass:"btn-success col-2 ml-2",on:{click:function(s){t.upVote(e._id,t.loggedUser,t.clickedBook)}}},[s("i",{staticClass:"fas fa-long-arrow-alt-up"}),t._v("\n                "+t._s(e.upVote.length)+"\n              ")]):t._e(),-1!=t.loggedUser?s("button",{staticClass:"btn-danger col-2 ml-2",on:{click:function(s){t.downVote(e._id,t.loggedUser,t.clickedBook)}}},[s("i",{staticClass:"fas fa-long-arrow-alt-down"}),t._v("\n                "+t._s(e.downVote.length)+"\n              ")]):t._e(),t.loggedUser==t.getInfoFromUser(e.userId)._id?s("button",{staticClass:"btn-primary col-2 ml-2",on:{click:function(s){t.editReview(e._id,e.comment)}}},[s("i",{staticClass:"fas fa-edit"})]):t._e(),t.loggedUser==t.getInfoFromUser(e.userId)._id?s("button",{staticClass:"btn-dark col-2 ml-2",on:{click:function(s){t.deleteReview(e._id)}}},[s("i",{staticClass:"fas fa-times"})]):t._e()])])]],2)}))]),s("Footer")],1)},W=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle"},[s("h3",[t._v("Detalhes do livro")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle"},[s("h3",[t._v("Comentários")])])])}],Y={data:function(){return{loggedUser:0,clickedBook:0,buttonText:"Requisitar",requisitions:[],books:[],users:[],reviews:[],buttonActive:!0,bookDeliver:!1,bookReq:!1,verifyEdit:!1,editThatOne:-1,picked:0,reviewArea:"",bookRating:0,reviewCheck:0,pageBookId:0,book:null,userLoggedIn:localStorage.getItem("userLoggedIn")}},methods:{notification:function(t,e){var s={notificationId:this.$store.state.notifications.length,userId:e,type:"bookAvailable",bookId:t,show:!1};this.$store.dispatch("add_notification",s),console.log(s)},calculateRating:function(){for(var t=0,e=0;e<this.reviews.length;e++)this.reviews[e].bookId==this.pageBookId&&(t+=this.reviews[e].rating);console.log("Rating total:"+t);var s=Math.round(t/this.reviews.length);return console.log("Rating total:"+s),s},doReview:function(t,e){var s=this;if(console.log(this.picked),0==this.picked)M()({type:"error",title:"Tem de classificar o livro para submeter a review."});else{var o=new Date,i={reviewId:this.reviews.length,bookId:t,userId:e,rating:this.picked,date:o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+" "+o.getHours()+":"+o.getMinutes(),comment:this.reviewArea,upVote:[],downVote:[]};console.table(i),f.a.post("https://owl-server-pw2.herokuapp.com/reviews",i).then(function(t){console.log("entrou"),console.log(t),f.a.get("https://owl-server-pw2.herokuapp.com/reviews?bookId="+s.$route.params.id).then(function(t){s.reviews=t.data}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)}),this.reviews.push(i),this.picked=0,this.reviewArea="",this.reviewCheck=1}},editReview:function(t,e){if(0==this.verifyEdit)this.verifyEdit=!0,this.editThatOne=t;else{this.verifyEdit=!1;var s="https://owl-server-pw2.herokuapp.com/reviews/"+t;f.a.put(s,{comment:e}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}},deleteReview:function(t){var e=this;M()({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(s){if(s.value)for(var o=0;o<e.reviews.length;o++)if(e.reviews[o]._id==t){var i="https://owl-server-pw2.herokuapp.com/reviews/"+e.reviews[o]._id;f.a.delete(i).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),e.reviews.splice(o,1),e.reviewCheck=0,M()("Deleted!","Review has been deleted.","success")}})},upVote:function(t,e,s){for(var o=!0,i=!0,a=[],r=[],n="https://owl-server-pw2.herokuapp.com/reviews/"+t,l=0;l<this.reviews.length;l++){if(this.reviews[l]._id==t){a=this.reviews[l].upVote,r=this.reviews[l].downVote;for(var c=0;c<this.reviews[l].upVote.length;c++)this.reviews[l].upVote[c]==e&&(o=!1)}for(var u=0;u<this.reviews[l].downVote.length;u++)this.reviews[l].downVote[u]==e&&(i=!1)}if(1==o){for(var d=0;d<this.reviews.length;d++)if(this.reviews[d]._id==t&&(a.push(this.loggedUser),f.a.put(n,{upVote:a}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),0==i))for(var g=0;g<r.length;g++)r[g]==this.loggedUser&&(r.splice(g,1),f.a.put(n,{downVote:r}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}));console.log(a),console.log(r),this.$store.dispatch("up_vote",[t,e,!0,i])}else{for(var h=0;h<this.reviews.length;h++)for(var m=0;m<a.length;m++)a[m]==this.loggedUser&&(a.splice(m,1),f.a.put(n,{upVote:a}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),console.log(a),console.log(r));this.$store.dispatch("up_vote",[t,e,!1,i])}},downVote:function(t,e,s){for(var o=!0,i=!0,a=[],r=[],n="https://owl-server-pw2.herokuapp.com/reviews/"+t,l=0;l<this.reviews.length;l++){if(this.reviews[l]._id==t){a=this.reviews[l].upVote,r=this.reviews[l].downVote;for(var c=0;c<this.reviews[l].downVote.length;c++)this.reviews[l].downVote[c]==e&&(o=!1)}for(var u=0;u<this.reviews[l].upVote.length;u++)this.reviews[l].upVote[u]==e&&(i=!1)}if(1==o){for(var d=0;d<this.reviews.length;d++)if(this.reviews[d]._id==t&&(r.push(this.loggedUser),f.a.put(n,{downVote:r}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),0==i))for(var g=0;g<a.length;g++)a[g]==this.loggedUser&&(a.splice(g,1),f.a.put(n,{upVote:a}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}));console.log(a),console.log(r),this.$store.dispatch("down_vote",[t,e,!0,i])}else{for(var h=0;h<r.length;h++)r[h]==this.loggedUser&&(r.splice(h,1),f.a.put(n,{downVote:r}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}));console.log(a),console.log(r),this.$store.dispatch("down_vote",[t,e,!1,i])}},getInfoFromUser:function(t){for(var e=!0,s=0,o=0;o<this.users.length;o++)this.users[o]._id==t&&1==e&&(s=this.users[o],e=!1);return s},checkRequesition:function(t,e){if(console.log(e),console.log("^teste"),this.bookReq=!1,-1!=e){for(var s=0;s<this.requisitions.length;s++)this.requisitions[s].bookId==t&&this.requisitions[s].userId==e&&1==this.requisitions[s].active?(this.buttonText="Entregar",this.bookReq=!0,this.buttonActive=!0,this.bookDeliver=!0):0==this.book.availability&&(this.buttonText="Não disponivel",this.bookReq=!0,this.buttonActive=!1);0==this.bookReq&&(this.buttonText="Requisitar")}else console.log("Offline user")},requesition:function(t,e){var s=this;if(-1==e)this.$router.push("login");else if(0==this.bookReq){var o=new Date,i={bookId:t,userId:e,requisitionDate:o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+" "+o.getHours()+":"+o.getMinutes(),deliveryDate:"",deliveryBookStatus:this.book.bookStatus,active:!0};console.table(this.requisitions),f.a.post("https://owl-server-pw2.herokuapp.com/requisitions",i).then(function(t){console.log("entrou"),console.log(t),s.requisitions.push(i),s.checkRequesition(s.clickedBook,s.loggedUser)}).catch(function(t){console.log(t)}),console.table(this.requisitions),M()({type:"success",title:"Livro requisitado com sucesso."}),console.log(i)}else for(var a=0;a<this.requisitions.length;a++)if(this.requisitions[a].bookId==t&&this.requisitions[a].userId==e&&1==this.requisitions[a].active){var r=new Date,n=r.getDate()+"/"+(r.getMonth()+1)+"/"+r.getFullYear()+" "+r.getHours()+":"+r.getMinutes();console.log("antes de entregar : "+this.requisitions[a]._id),f.a.put("https://owl-server-pw2.herokuapp.com/requisitions/"+this.requisitions[a]._id,{deliveryDate:n}).then(function(t){console.log(t),s.checkRequesition(s.clickedBook,s.loggedUser)}).catch(function(t){console.log(t)}),M()({type:"success",title:"Livro entregado com sucesso."}),console.table(this.users),console.table(this.requisitions),console.table(this.books)}}},components:{Header:w,Footer:D},computed:{},beforeMount:function(){var t=this,e="https://owl-server-pw2.herokuapp.com/books?id="+this.$route.params.id,s="https://owl-server-pw2.herokuapp.com/reviews?bookId="+this.$route.params.id,o="https://owl-server-pw2.herokuapp.com/requisitions?userId="+this.userLoggedIn;f.a.get(e).then(function(e){console.log(e.data),t.book=e.data,console.log(t.book)}).catch(function(t){console.log(t)}),f.a.get(s).then(function(e){console.log(e.data),t.reviews=e.data,console.log("reviews:"),console.log(t.reviews),t.bookRating=t.calculateRating()}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/users").then(function(e){console.log("teste"),console.log(e.data),t.users=e.data,console.log("users:"),console.log(t.users);for(var s=0;s<t.reviews.length;s++)t.reviews[s].bookId==t.clickedBook&&t.reviews[s].userId==t.loggedUser&&(console.log("already review"),t.reviewCheck=1)}).catch(function(t){console.log(t)}),f.a.get(o).then(function(e){console.log("reqs:"),console.log(e.data),t.requisitions=e.data,t.checkRequesition(t.clickedBook,t.loggedUser)}).catch(function(t){console.log(t)}),this.loggedUser=localStorage.getItem("userLoggedIn"),this.clickedBook=this.$route.params.id,this.books=this.$store.getters.books,this.pageBookId=this.$route.params.id,console.log(this.requisitions.length),console.log(this.requisitions),this.checkRequesition(this.clickedBook,this.loggedUser)}},Q=Y,K=(s("fe00"),Object(l["a"])(Q,G,W,!1,null,null,null)),J=K.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("Header"),s("div",{staticClass:"margin5 mt-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-lg-6"},[t._m(0),s("div",{staticClass:"boxContent alignLeft",attrs:{id:"margin"}},[t._m(1),s("div",{staticClass:"mt-2"},t._l(t.filtredUsers,function(e,o){return s("div",{key:e.userId},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("p",[t._v(t._s(o+1))])]),s("div",{staticClass:"col-1"},[o+1==1?s("i",{staticClass:"fas fa-trophy",staticStyle:{color:"gold"}}):t._e(),o+1==2?s("i",{staticClass:"fas fa-trophy",staticStyle:{color:"silver"}}):t._e(),o+1==3?s("i",{staticClass:"fas fa-trophy",staticStyle:{color:"bronze"}}):t._e()]),s("div",{staticClass:"col-6"},[s("p",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.firstName)+" "+t._s(e.lastName))])]),s("div",{staticClass:"col-3"},[s("p",[t._v(t._s(e.points))])])])])}))])]),s("div",{staticClass:"col-12 col-lg-6 mt-4 mt-lg-0"},[t._m(2),s("div",{staticClass:"boxContent alignLeft",attrs:{id:"margin"}},[t._m(3),s("div",{staticClass:"mt-2"},t._l(t.filtredBooks,function(e,o){return s("div",{key:e.bookId},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("p",[t._v(t._s(o+1))])]),s("div",{staticClass:"col-1"},[o+1==1?s("i",{staticClass:"fas fa-trophy",staticStyle:{color:"gold"}}):t._e(),o+1==2?s("i",{staticClass:"fas fa-trophy",staticStyle:{color:"silver"}}):t._e(),o+1==3?s("i",{staticClass:"fas fa-trophy",staticStyle:{color:"DarkGoldenRod"}}):t._e()]),s("div",{staticClass:"col-6"},[s("p",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.firstName)+" "+t._s(e.title))])]),s("div",{staticClass:"col-3"},[s("p",[t._v(t._s(e.nViews))])])])])}))])])])]),s("Footer")],1)},Z=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"boxTitle"},[s("h3",{attrs:{id:"title"}},[t._v("Rank de Utilizadores")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("h4",[t._v("#")])]),s("div",{staticClass:"col-7"},[s("h4",[t._v("Nome")])]),s("div",{staticClass:"col-3"},[s("h4",[t._v("Pontos")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"boxTitle"},[s("h3",{attrs:{id:"title"}},[t._v("Rank de Livros")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("h4",[t._v("#")])]),s("div",{staticClass:"col-7"},[s("h4",[t._v("Livro")])]),s("div",{staticClass:"col-3"},[s("h4",[t._v("Views")])])])}],tt={components:{Header:w,Footer:D},data:function(){return{requisitions:[],books:[],users:[],reviews:[],filtredUsers:[],filtredBooks:[],count:[1,2,3,4,5,6,7,8,9,10]}},methods:{bookRank:function(){var t=this.books.sort(function(t,e){return t.nViews>e.nViews?-1:t.nViews<e.nViews?1:0});return t.slice(0,10)},userRank:function(){var t=this.users.sort(function(t,e){return t.points>e.points?-1:t.points<e.points?1:0});return t.slice(0,10)}},computed:{},beforeMount:function(){var t=this;this.requisitions=this.$store.getters.requisitions,f.a.get("https://owl-server-pw2.herokuapp.com/books").then(function(e){t.books=e.data,console.log("books:"),console.log(t.books),t.filtredBooks=t.bookRank()}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/users").then(function(e){t.users=e.data,console.log("users:"),console.log(t.users),t.filtredUsers=t.userRank()}).catch(function(t){console.log(t)}),this.reviews=this.$store.getters.reviews}},et=tt,st=(s("e110"),Object(l["a"])(et,X,Z,!1,null,"6998a485",null)),ot=st.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("Header"),s("div",{staticClass:"margin5 mt-4"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent",attrs:{id:""}},[s("form",{attrs:{action:"",id:"formSugestion"}},[s("label",{staticClass:"mt-3",attrs:{for:"formTitle"}},[t._v("Titulo")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",id:"formTitle",required:""},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),s("label",{staticClass:"mt-3",attrs:{for:"formCover"}},[t._v("Capa")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.cover,expression:"form.cover"}],staticClass:"form-control",attrs:{type:"text",id:"formCover"},domProps:{value:t.form.cover},on:{input:function(e){e.target.composing||t.$set(t.form,"cover",e.target.value)}}}),s("label",{staticClass:"mt-3",attrs:{for:"formAuthor"}},[t._v("Autor")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.author,expression:"form.author"}],staticClass:"form-control",attrs:{type:"text",id:"formAuthor"},domProps:{value:t.form.author},on:{input:function(e){e.target.composing||t.$set(t.form,"author",e.target.value)}}}),s("button",{staticClass:"btn btn-lg mt-3 mb-3",attrs:{type:"button",id:"btnSubmit"},on:{click:t.addSuggestion}},[t._v("Submeter")])])])])]),s("Footer")],1)},at=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle",attrs:{id:""}},[s("h3",[t._v("Sugerir livro")])])])}],rt={components:{Header:w,Footer:D},data:function(){return{userLoggedIn:localStorage.getItem("userLoggedIn"),form:{title:"Foi Sem Querer Que Te Quis",cover:"https://img.wook.pt/images/programacao-em-python-ernesto-costa/MXwxNzA0MzMzNXwxMjY2NzI1MnwxNDQ4MjM2ODAwMDAw/502x",author:"Ernesto Costa"},bookSuggestions:[]}},created:function(){var t=this;f.a.get("https://owl-server-pw2.herokuapp.com/bookSuggestions").then(function(e){console.log(e.data),t.bookSuggestions=e.data,console.log(t.bookSuggestions)}).catch(function(t){console.log(t)})},methods:{addSuggestion:function(){for(var t=!1,e=0;e<this.bookSuggestions.length;e++)if(this.bookSuggestions[e].suggestionTitle==this.form.title){t=!0;var s="https://owl-server-pw2.herokuapp.com/bookSuggestions/"+this.bookSuggestions[e]._id;f.a.put(s).then(function(t){M()({type:"success",title:"Livro sugerido com sucesso."})}).catch(function(t){console.log(t)}),document.getElementById("formSugestion").reset()}console.log(t),0==t&&(console.log("entrou"),f.a.post("https://owl-server-pw2.herokuapp.com/bookSuggestions",{suggestionTitle:this.form.title,suggestionAuthor:this.form.author,suggestionCover:this.form.cover,userId:this.userLoggedIn,suggestionDate:(new Date).toLocaleString(),suggestNumber:1}).then(function(t){console.log(t),console.log("posted"),M()({type:"success",title:"Livro sugerido com sucesso."})}).catch(function(t){console.log(t)}),document.getElementById("formSugestion").reset())}}},nt=rt,lt=(s("209a"),Object(l["a"])(nt,it,at,!1,null,"ed8de230",null)),ct=lt.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("Header"),s("div",{staticClass:"margin5 mt-4"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4 offset-md-4 boxContent"},[s("div",{staticClass:"form-wrapper text-center"},[s("form",{staticClass:"form-signin"},[s("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),s("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),s("button",{staticClass:"btn btn-lg btn-block",attrs:{id:"btnLogin",type:"submit"},on:{click:t.login}},[t._v("Log in")])])])])])]),s("Footer")],1)},dt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4 offset-md-4 boxTitle"},[s("h3",[t._v("Login")])])])}],gt=(s("96cf"),s("1da1")),ht={name:"login",components:{Header:w,Footer:D},data:function(){return{form:{email:"",password:""},url:"http://localhost:3000/",success:0}},methods:{login:function(){var t=Object(gt["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post(this.url+"users/login",{email:this.form.email,password:this.form.password});case 3:e=t.sent,console.log(e.data),M()({type:"success",title:"Login efetuado com sucesso."}),localStorage.setItem("userLoggedIn",e.data.user._id),this.$router.push("/"),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),this.error=1==!!t.t0.response.data.error?t.t0.response.data.error:"",M()({type:"error",title:"Os seus dados estão incorretos."});case 14:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}()}},mt=ht,vt=(s("c48f"),Object(l["a"])(mt,ut,dt,!1,null,"58f2eb6b",null)),pt=vt.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signup"},[s("Header"),s("div",{staticClass:"margin5 mt-4"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4 offset-md-4 boxContent"},[s("div",{staticClass:"form-wrapper text-center"},[s("form",{staticClass:"form-signin col-6"},[s("label",{staticClass:"sr-only",attrs:{for:"inputFirstName"}},[t._v("Nome")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"form-control",attrs:{type:"firstName",id:"inputFirstName",placeholder:"Nome próprio",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}}),s("label",{staticClass:"sr-only",attrs:{for:"inputLastName"}},[t._v("Nome")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"form-control",attrs:{type:"lastName",id:"inputLastName",placeholder:"Apelido",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),s("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),s("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("label",{staticClass:"sr-only",attrs:{for:"inputPassword2"}},[t._v("Repita a Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword2",placeholder:"Repita a Password",required:""},domProps:{value:t.password2},on:{input:function(e){e.target.composing||(t.password2=e.target.value)}}}),s("button",{staticClass:"btn btn-lg btn-block",attrs:{id:"btnSignup",type:"submit"},on:{click:t.signup}},[t._v("Sign up")])])])])])]),s("Footer")],1)},bt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4 offset-md-4 boxTitle"},[s("h3",[t._v("Signup")])])])}],_t={name:"signup",components:{Header:w,Footer:D},data:function(){return{url:"https://owl-server-pw2.herokuapp.com/",firstName:"",lastName:"",email:"",password:"",password2:"",err:!1}},methods:{signup:function(){var t=Object(gt["a"])(regeneratorRuntime.mark(function t(){var e,s,o,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.email.includes("@"),s=this.email.indexOf("@"),o=this.email[s+1],console.log(this.password.length),!(this.password==this.password2&&this.password.length>0&&e&&o)){t.next=12;break}return t.next=7,f.a.post(this.url+"users",{firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password});case 7:i=t.sent,M()({type:"success",title:"Registo efetuado com sucesso"}),i.data.error&&(console.log(i.data.error),M()({type:"error",title:"Ocorreu um erro, tente mais tarde"})),t.next=13;break;case 12:e&&o&&M()({type:"error",title:"As passwords não sao iguais!"});case 13:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},kt=_t,wt=(s("afa0"),Object(l["a"])(kt,ft,bt,!1,null,"2da0faa4",null)),Ct=wt.exports,It=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("Header"),s("div",{staticClass:"margin5 mt-4"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-9 col-md-9 boxContent"},t._l(t.users,function(e){return s("div",{key:e._id},[e._id==t.userLoggedIn?s("div",[s("div",{staticClass:"row",staticStyle:{"text-align":"left"}},[s("div",{staticClass:"col-12 col-md-6 col-lg-3"},[0==t.clicked?s("img",{staticClass:"mt-4 ml-2 mb-4",attrs:{src:e.photo,height:"200",width:"250",alt:"",id:"profilePhoto"}}):t._e(),t.clicked?s("input",{directives:[{name:"model",rawName:"v-model",value:e.photo,expression:"user.photo"}],staticClass:"form-control editInput col-9 mt-5 col-lg-7 mb-2",attrs:{type:"text"},domProps:{value:e.photo},on:{input:function(s){s.target.composing||t.$set(e,"photo",s.target.value)}}}):t._e()]),s("div",{staticClass:"col-12 col-md-6 col-lg-9"},[s("h4",{staticClass:"mt-4"},[t._v("Nome de Utilizador")]),0==t.clicked?s("p",[t._v(t._s(e.firstName)+" "+t._s(e.lastName))]):t._e(),s("div",{staticClass:"row"},[t.clicked?s("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"user.firstName"}],staticClass:"form-control editInput col-4 col-lg-3 mb-1 ml-3",attrs:{type:"text"},domProps:{value:e.firstName},on:{input:function(s){s.target.composing||t.$set(e,"firstName",s.target.value)}}}):t._e(),t.clicked?s("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"user.lastName"}],staticClass:"form-control editInput col-4 col-lg-3 ml-1 mb-2",attrs:{type:"text"},domProps:{value:e.lastName},on:{input:function(s){s.target.composing||t.$set(e,"lastName",s.target.value)}}}):t._e()]),s("h4",[t._v("Email")]),0==t.clicked?s("p",[t._v(t._s(e.email))]):t._e(),t.clicked?s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"user.email"}],staticClass:"form-control editInput col-9 col-lg-7 mb-2",attrs:{type:"text"},domProps:{value:e.email},on:{input:function(s){s.target.composing||t.$set(e,"email",s.target.value)}}}):t._e(),s("a",{staticClass:"btn btn-dark mt-1",attrs:{id:"btnEdit"},on:{click:t.editProfile}},[s("i",{staticClass:"fas fa-edit"}),t._v(" Editar perfil\n                ")])])])]):t._e()])})),0==t.clicked?s("div",{staticClass:"col-3 col-md-3 boxContent"},[s("h4",{staticClass:"mt-4"},[t._v("Tags Favoritas")]),s("ul",t._l(t.testes2,function(e,o){return s("li",{key:o,staticClass:"text-left"},[t._v(t._s(e))])}))]):t._e(),t.clicked?s("div",{staticClass:"col-3 col-md-3 boxContent"},[s("h4",{staticClass:"mt-4"},[t._v("Tags Favoritas")]),s("div",{staticClass:"scrollbox"},t._l(t.tags,function(e,o){return s("p",{key:o},[s("input",{attrs:{id:o,type:"checkbox"},domProps:{value:o}}),t._v("\n            "+t._s(e.tagDescription)+"\n          ")])}))]):t._e()]),s("div",{staticClass:"mt-4"},[t._m(1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent"},t._l(t.requisitions,function(e){return s("div",{key:e.requisitionId},t._l(t.books,function(o){return s("div",{key:o.bookId},[e.userId==t.userLoggedIn&&1==e.active&&e.bookId==o._id?s("div",[s("div",{staticClass:"row",staticStyle:{"text-align":"left"}},[s("div",{staticClass:"col-12 col-md-2"},[s("router-link",{attrs:{to:{name:"book",params:{id:o._id}}},nativeOn:{mouseover:function(e){t.clickBook(o._id)}}},[s("img",{staticClass:"owlCovers mt-4 ml-3",attrs:{src:o.cover}})])],1),s("div",{staticClass:"col-12 col-md-10"},[s("h4",{staticClass:"mt-5"},[t._v(t._s(o.title))]),s("h5",[t._v("de "+t._s(o.author))]),s("p",{staticClass:"mt-4"},[s("b",[t._v("Data de Requisição:")]),t._v("\n                      "+t._s(e.requisitionDate)+"\n                    ")]),s("a",{staticClass:"btn buttonColor",staticStyle:{color:"white"},on:{click:function(e){t.deliverBook(o._id,t.userLoggedIn)}}},[t._v("Entregar")])])])]):t._e()])}))}))])]),s("div",{staticClass:"mt-4"},[t._m(2),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent"},[s("table",{staticClass:"table mt-4",attrs:{"table-responsive":""}},[t._m(3),t._l(t.requisitions,function(e){return s("tbody",{key:e.requisitionId},t._l(t.books,function(o){return s("tr",{key:o.bookId},[e.userId==t.userLoggedIn&&0==e.active&&e.bookId==o._id?s("td",[t._v(t._s(o.title))]):t._e(),e.userId==t.userLoggedIn&&0==e.active&&e.bookId==o._id?s("td",[s("input",{attrs:{type:"button",value:"+"},on:{click:function(e){t.seeCover(o.cover)}}})]):t._e(),e.userId==t.userLoggedIn&&0==e.active&&e.bookId==o._id?s("td",[t._v(t._s(o.author))]):t._e(),e.userId==t.userLoggedIn&&0==e.active&&e.bookId==o._id?s("td",[t._v(t._s(e.requisitionDate))]):t._e(),e.userId==t.userLoggedIn&&0==e.active&&e.bookId==o._id?s("td",[t._v(t._s(e.deliveryDate))]):t._e()])}))})],2)])])])]),s("Footer")],1)},yt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle"},[s("h3",[t._v("Perfil")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle",attrs:{id:""}},[s("h3",[t._v("Requisicoes")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle",attrs:{id:""}},[s("h3",[t._v("Historico Requisicoes")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Titulo")]),s("th",{attrs:{scope:"col"}},[t._v("Capa")]),s("th",{attrs:{scope:"col"}},[t._v("Autor")]),s("th",{attrs:{scope:"col"}},[t._v("Data de Requisicao")]),s("th",{attrs:{scope:"col"}},[t._v("Data de Entrega")])])])}],Tt={components:{Header:w,Footer:D},data:function(){return{users:[],userLoggedIn:localStorage.getItem("userLoggedIn"),requisitions:[],books:[],clicked:!1,user:{firstName:"",lastName:"",email:"",favTags:[],photo:""},tags:[],testes:[],testes2:[],clickedBook:0}},created:function(){var t=this;f.a.get("https://owl-server-pw2.herokuapp.com/users").then(function(e){t.users=e.data,console.log("users:"),console.log(t.users);for(var s=0;s<t.users.length;s++)t.users[s]._id==t.userLoggedIn&&(t.testes=t.users[s].favTags,console.log(t.testes))}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/tags").then(function(e){t.tags=e.data,console.log("tags:"),console.log(t.tags);for(var s=0;s<t.tags.length;s++)for(var o=0;o<t.testes.length;o++)t.tags[s]._id==t.testes[o]&&t.testes2.push(t.tags[s].tagDescription)}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/books").then(function(e){t.books=e.data,console.log("books:"),console.log(t.books)}).catch(function(t){console.log(t)}),console.log(this.userLoggedIn),f.a.get("https://owl-server-pw2.herokuapp.com/requisitions?userId="+this.userLoggedIn).then(function(e){t.requisitions=e.data,console.log("requisitions:"),console.log(t.requisitions)}).catch(function(t){console.log(t)})},updated:function(){this.checkCheckboxes()},methods:{deliverBook:function(t,e){for(var s=this,o=0;o<this.requisitions.length;o++)if(this.requisitions[o].bookId==t&&this.requisitions[o].userId==e&&1==this.requisitions[o].active){var i=new Date,a=i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()+" "+i.getHours()+":"+i.getMinutes();f.a.put("https://owl-server-pw2.herokuapp.com/requisitions/"+this.requisitions[o]._id,{deliveryDate:a}).then(function(t){console.log(t),s.checkRequesition(s.clickedBook,s.loggedUser)}).catch(function(t){console.log(t)}),M()({type:"success",title:"Livro entregado com sucesso."}),this.requisitions[o].active=!1}},editProfile:function(){if(this.clicked){this.clicked=!1;for(var t=0;t<this.users.length;t++)if(this.users[t]._id==this.userLoggedIn){this.user.firstName=this.users[t].firstName,this.user.lastName=this.users[t].lastName,this.user.email=this.users[t].email,this.user.photo=this.users[t].photo;var e="https://owl-server-pw2.herokuapp.com/users/"+this.users[t]._id;f.a.put(e,{firstName:this.user.firstName,lastName:this.user.lastName,email:this.user.email,photo:this.user.photo}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}this.testes=[],this.testes2=[],this.user.favTags=[];for(var s=0;s<this.tags.length;s++)console.log("entrou no for do coiso"),document.getElementById(s.toString()).checked&&(console.log("entrou no if do coiso"),this.testes.push(this.tags[s].tagDescription),this.user.favTags.push(this.tags[s]._id),console.log(this.user.favTags));var o="https://owl-server-pw2.herokuapp.com/users/"+this.userLoggedIn;f.a.put(o,{favTags:this.user.favTags}).then(function(t){console.log("entrou edit tags"),console.log(t)}).catch(function(t){console.log(t)});for(var i=0;i<this.users.length;i++)this.users[i]._id==this.userLoggedIn&&(this.testes=this.user.favTags);for(var a=0;a<this.tags.length;a++)for(var r=0;r<this.testes.length;r++)this.tags[a]._id==this.testes[r]&&this.testes2.push(this.tags[a].tagDescription)}else this.clicked=!0},checkCheckboxes:function(){if(this.clicked){this.user.favTags=this.testes2,console.log(this.user.favTags);for(var t=0;t<this.tags.length;t++)for(var e=0;e<this.user.favTags.length;e++)this.tags[t].tagDescription==this.user.favTags[e]&&(document.getElementById(t.toString()).checked=!0)}},clickBook:function(t){for(var e=0;e<this.books.length;e++)this.books[e].bookId===t&&(this.$store.dispatch("open_book",e),this.clickedBook=e)},seeCover:function(t){M()({title:"Capa",text:t,html:'<img src="'+t+'" alt="" class="coverSize">',showConfirmButton:!0})}},computed:{}},xt=Tt,Dt=(s("2a37"),Object(l["a"])(xt,It,yt,!1,null,null,null)),St=Dt.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Achievements"},[s("Header"),s("div",{staticClass:"margin5 mt-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle"},[s("h3",[t._v("Conquistas "+t._s(t.achComplete.length)+"/"+t._s(t.achievements.type1.length))])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent"},[s("div",{staticClass:"row"},t._l(t.achievements.type1,function(e,o){return s("div",{key:e,staticClass:"col-12 col-sm-6 col-lg-4 mt-3 mb-3 pl-5 pr-5"},[s("div",{staticClass:"row",staticStyle:{"background-color":"white"}},[s("div",{staticClass:"col-3"},[s("i",{staticClass:"fas fa-star-half-alt mt-4 pb-3",staticStyle:{"font-size":"60px"},style:{color:t.getTheRightAch(o)[0]}})]),s("div",{staticClass:"col-8"},[1==t.getTheRightAch(o)[1]?s("h4",{staticClass:"mt-4"},[t._v("\n                  "+t._s(t.achievements.text1[0])+t._s(t.achievements.type1[o])+t._s(t.achievements.text1[1])+"\n                  \n                ")]):t._e(),2==t.getTheRightAch(o)[1]?s("h4",{staticClass:"mt-4"},[t._v("\n                  "+t._s(t.achievements.text2[0])+t._s(t.achievements.type1[o])+t._s(t.achievements.text2[1])+"\n                  \n                ")]):t._e(),3==t.getTheRightAch(o)[1]?s("h4",{staticClass:"mt-4"},[t._v("\n                  "+t._s(t.achievements.text3[0])+t._s(t.achievements.type1[o])+t._s(t.achievements.text3[1])+"\n                  \n                ")]):t._e(),4==t.getTheRightAch(o)[1]?s("h4",{staticClass:"mt-4"},[t._v("\n                  "+t._s(t.achievements.text4[0])+t._s(t.achievements.type1[o])+t._s(t.achievements.text4[1])+"\n                  \n                ")]):t._e(),s("div",{staticClass:"progress"},[100==t.achievementReq(t.achievements.type1[o],o)[1]?s("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated bg-primary",style:{width:t.achievementReq(t.achievements.type1[o],o)[2]},attrs:{role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100"}},[t._v("Completo")]):t._e(),t.achievementReq(t.achievements.type1[o],o)[1]<100?s("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated bg-success",style:{width:t.achievementReq(t.achievements.type1[o],o)[2]},attrs:{role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100"}},[t._v(t._s(t.achievementReq(t.achievements.type1[o],o)[2]))]):t._e()])])])])}))])])]),s("Footer")],1)},Et=[],Bt={data:function(){return{userLoggedIn:0,requisitions:[],books:[],users:[],reviews:[],achievements:[],achComplete:[]}},components:{Header:w,Footer:D},methods:{getTheRightAch:function(t){var e="",s=0;s=t<3?1:t<6?2:t<9?3:4;while(t>2)t-=3;return e=(t+1)%3==0?"Gold":(t+1)%2==0?"Silver":"Peru",[e,s]},achievementReq:function(t,e){var s=0,o=0,i="";if(e>=0&&e<3)for(var a=0;a<this.requisitions.length;a++)this.requisitions[a].userId==this.userLoggedIn&&s++;else if(e>=3&&e<6)for(var r=0;r<this.reviews.length;r++)this.reviews[r].userId==this.userLoggedIn&&s++;else if(e>=6&&e<9)for(var n=0;n<this.reviews.length;n++)this.reviews[n].userId==this.userLoggedIn&&(s+=this.reviews[n].upVote.length);else if(e>=9)for(var l=0;l<this.users.length;l++)this.users[l]._id==this.userLoggedIn&&(s=this.users[l].points);if(s>=t){i="100%",o=100;for(var c=!1,u=0;u<this.achComplete.length;u++)this.achComplete[u]==e&&(c=!0);0==c&&this.achComplete.push(e)}else o=parseInt(s/t*100),i=o+"%";return[s,o,i]}},created:function(){var t=this;this.userLoggedIn=localStorage.getItem("userLoggedIn"),console.log(this.userLoggedIn),this.achievements=this.$store.state.achievements,f.a.get("http://localhost:3000/users").then(function(e){t.users=e.data,console.log("users:"),console.log(t.users)}).catch(function(t){console.log(t)}),f.a.get("http://localhost:3000/books").then(function(e){t.books=e.data,console.log("books:"),console.log(t.books)}).catch(function(t){console.log(t)}),f.a.get("http://localhost:3000/reviews").then(function(e){t.reviews=e.data,console.log("reviews:"),console.log(t.reviews)}).catch(function(t){console.log(t)}),console.log(this.userLoggedIn),f.a.get("http://localhost:3000/requisitions?userId="+this.userLoggedIn).then(function(e){t.requisitions=e.data,console.log("requisitions:"),console.log(t.requisitions)}).catch(function(t){console.log(t)})}},qt=Bt,Lt=Object(l["a"])(qt,Nt,Et,!1,null,null,null),At=Lt.exports,Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("Header"),-1==t.userLoggedIn?s("header",{attrs:{id:"home"}},[s("div",{staticClass:"row",staticStyle:{height:"600px"}},[s("div",{staticClass:"col-6 col-md-6 ",staticStyle:{"padding-top":"200px"}},[s("h1",[t._v("Descubra o que o Owl tem para si!")]),s("p",[t._v("Owl fornece uma vasta libraria, veja o nosso catálogo!")]),s("div",[s("router-link",{attrs:{to:{name:"catalog"}}},[s("button",{staticClass:"btn btn-owl"},[t._v("Ver catálogo")])])],1)]),t._m(0)])]):t._e(),-1!=t.userLoggedIn?s("div",[t._m(1),s("div",{attrs:{id:""}},[s("br"),s("div",{staticClass:"row"},t._l(t.recommended.slice(0,4),function(e){return s("div",{key:e.bookId,staticClass:"col-6 col-md-3"},[s("router-link",{attrs:{to:{name:"book",params:{id:t.clickedBook}}},nativeOn:{mouseover:function(s){t.clickBook(e.bookId)},click:function(s){t.addView(e.bookId)}}},[s("img",{staticClass:"owlBigCovers mt-3",attrs:{src:e.cover}})])],1)}))])]):t._e(),t._m(2),s("div",{attrs:{id:"catalogContents"}},[s("br"),s("div",{staticClass:"row"},t._l(t.mostViews.slice(0,4),function(e){return s("div",{key:e.bookId,staticClass:"col-6 col-md-3"},[s("router-link",{attrs:{to:{name:"book",params:{id:t.clickedBook}}},nativeOn:{mouseover:function(s){t.clickBook(e.bookId)},click:function(s){t.addView(e.bookId)}}},[s("img",{staticClass:"owlBigCovers mt-3",attrs:{src:e.cover}})])],1)})),s("br"),s("br"),s("br")]),s("Footer")],1)},Ot=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-6"},[s("img",{staticStyle:{"padding-right":"100px","padding-top":"30px"},attrs:{src:"https://cdn.discordapp.com/attachments/373524098954821632/578234339976937492/books.png",alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"recBar"}},[s("h3",{attrs:{id:"recommended"}},[t._v("Recomendados")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"landingBar"}},[s("h3",{attrs:{id:"owlTitle"}},[t._v("Mais Populares")])])}],Pt={name:"home",components:{Header:w,Footer:D},data:function(){return{userLoggedIn:localStorage.getItem("userLoggedIn"),users:this.$store.state.users,books:[],recommended:[],mostViews:[],userTags:[],clickedBook:0}},created:function(){var t=this;f.a.get("http://localhost:3000/books").then(function(e){t.books=e.data,t.mostViews=t.books.sort(function(t,e){return t.nViews>e.nViews?-1:t.nViews<e.nViews?1:0}),console.log(t.mostViews),console.log(t.books)}).catch(function(t){console.log(t)}),console.log("userLoggedIn: "+this.userLoggedIn),this.userTags=this.users[this.userLoggedIn].favTags;for(var e=0;e<this.books.length;e++)for(var s=0;s<this.books[e].idTag.length;s++)for(var o=0;o<this.userTags.length;o++){if(this.recommended.length>=4)break;this.books[e].idTag[s]==this.userTags[o]&&(this.recommended.push(this.books[e]),this.recommended[e]==this.recommended[e+1]&&this.recommended.splice(e+1,1))}},methods:{getTop2:function(){this.top2=this.books2.sort(function(t,e){return t.nViews>e.nViews?-1:t.nViews<e.nViews?1:0})},clickBook:function(t){for(var e=0;e<this.books.length;e++)this.books[e].bookId===t&&(this.$store.dispatch("open_book",e),this.clickedBook=e)},addView:function(t){console.log("entrou");for(var e=0;e<this.books.length;e++)this.books[e].bookId===t&&(this.$store.dispatch("add_view",e),console.log("oi"))}}},Vt=Pt,Ft=(s("10a0"),Object(l["a"])(Vt,Rt,Ot,!1,null,null,null)),$t=Ft.exports,Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("backOfficeNav"),s("div",{staticClass:"margin5 mt-4"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent alignLeft"},[s("form",{staticClass:"mt-4",attrs:{action:""}},[s("label",{staticClass:"ml-2",attrs:{for:"nameFilter"}},[t._v("Filtrar por nome de utilizador:")]),s("div",{staticClass:"form-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.nameFilter,expression:"nameFilter"}],staticClass:"form-control ml-2",attrs:{type:"text",id:"nameFilter"},domProps:{value:t.nameFilter},on:{input:function(e){e.target.composing||(t.nameFilter=e.target.value)}}}),s("button",{staticClass:"btn buttonColor ml-4",attrs:{id:"btnLogin"},on:{click:t.filterUsersByName}},[t._v("Filtrar")])])]),s("table",{staticClass:"table mt-4 table-responsive"},[t._m(1),s("tbody",t._l(t.filteredUsers,function(e){return s("tr",{key:e.userId},[s("td",[t._v(t._s(e.firstName))]),s("td",[t._v(t._s(e.lastName))]),s("td",[t._v(t._s(e.email))]),s("td",[t._v(t._s(e.photo))]),s("td",[t._v(t._s(e.type))]),s("td",[1==e.ableToRequest?s("span",[t._v("Sim")]):t._e(),0==e.ableToRequest?s("span",[t._v("Não")]):t._e(),1==e.ableToRequest?s("button",{staticClass:"btn btn-danger ml-2",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.denyRequest(e._id)}}},[s("i",{staticClass:"fas fa-ban"})]):t._e(),0==e.ableToRequest?s("button",{staticClass:"btn btn-success ml-2",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.letRequest(e._id)}}},[s("i",{staticClass:"fas fa-check"})]):t._e()]),s("td",[s("button",{staticClass:"btn btn-danger mr-2",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.deleteUser(e._id)}}},[s("i",{staticClass:"fas fa-trash-alt"})]),"admin"!=e.type?s("button",{staticClass:"btn btn-dark",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.addAdmin(e._id)}}},[t._v("Tornar Admin")]):t._e(),"admin"==e.type?s("button",{staticClass:"btn btn-dark",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.deleteAdmin(e._id)}}},[t._v("Retirar Admin")]):t._e()])])}))])])])])],1)},Ut=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle"},[s("h3",[t._v("Utilizadores")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Nome Próprio")]),s("th",{attrs:{scope:"col"}},[t._v("Último Nome")]),s("th",{attrs:{scope:"col"}},[t._v("Email")]),s("th",{attrs:{scope:"col"}},[t._v("Foto")]),s("th",{attrs:{scope:"col"}},[t._v("Tipo")]),s("th",{attrs:{scope:"col"}},[t._v("Pode Requisitar")]),s("th",{attrs:{scope:"col"}},[t._v("Ações")])])])}],jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light",attrs:{id:"navbarNav"}},[s("router-link",{staticClass:"navbar-brand",staticStyle:{color:"white"},attrs:{to:{name:"home"}}},[t._v("OWL")]),s("b-navbar-toggle",{attrs:{target:"nav-collapse",id:"white"}},[s("i",{staticClass:"fas fa-bars"})]),s("b-collapse",{staticClass:"alignLeft",attrs:{id:"nav-collapse","is-nav":""}},[s("ul",{staticClass:"navbar-nav"},[s("li",{staticClass:"nav-item",attrs:{id:"navLinks"}},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"users"}}},[t._v("Utilizadores")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"books"}}},[t._v("Livros")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"tags"}}},[t._v("Tags")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"suggestions"}}},[t._v("Sugestões")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"home"}}},[t._v("Voltar")])],1)])])],1)])},Ht=[],zt={},Gt=zt,Wt=(s("9f6f"),Object(l["a"])(Gt,jt,Ht,!1,null,null,null)),Yt=Wt.exports,Qt={components:{backOfficeNav:Yt},data:function(){return{users:null,filteredUsers:null,nameFilter:"",username:""}},created:function(){var t=this;f.a.get("https://owl-server-pw2.herokuapp.com/users").then(function(e){t.users=e.data,t.filteredUsers=e.data,console.log("users:"),console.log(t.users)}).catch(function(t){console.log(t)})},methods:{deleteUser:function(t){var e=this;M()({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(s){if(s.value)for(var o=0;o<e.users.length;o++)if(e.users[o]._id===t){var i="https://owl-server-pw2.herokuapp.com/users/"+e.users[o]._id;f.a.delete(i).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),e.users.splice(o,1),M()("Deleted!","User has been deleted.","success")}})},addAdmin:function(t){console.log(t);for(var e=0;e<this.users.length;e++)if(this.users[e]._id===t){var s="https://owl-server-pw2.herokuapp.com/users/"+this.users[e]._id;f.a.put(s,{type:"admin"}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.users[e].type="admin",M()({type:"success",title:"Admin adicionado com sucesso."})}},deleteAdmin:function(t){for(var e=0;e<this.users.length;e++)if(this.users[e]._id===t){var s="https://owl-server-pw2.herokuapp.com/users/"+this.users[e]._id;f.a.put(s,{type:"user"}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.users[e].type="user",M()({type:"success",title:"Admin retirado com sucesso."})}},letRequest:function(t){for(var e=0;e<this.users.length;e++)if(this.users[e]._id===t){var s="https://owl-server-pw2.herokuapp.com/users/"+this.users[e]._id;f.a.put(s,{ableToRequest:!0}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.users[e].ableToRequest=!0,M()({type:"success",title:"O utilizador já pode requisitar."})}},denyRequest:function(t){for(var e=0;e<this.users.length;e++)if(this.users[e]._id===t){var s="https://owl-server-pw2.herokuapp.com/users/"+this.users[e]._id;f.a.put(s,{ableToRequest:!1}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.users[e].ableToRequest=!1,M()({type:"success",title:"O utilizador esta proibido de requisitar."})}},filterUsersByName:function(){this.filteredUsers=[];for(var t=!1,e=0;e<this.users.length;e++){this.username=this.users[e].firstName+" "+this.users[e].lastName;var s=this.username.toUpperCase(),o=this.nameFilter.toUpperCase();t=s.includes(o),t&&this.filteredUsers.push(this.users[e])}}}},Kt=Qt,Jt=Object(l["a"])(Kt,Mt,Ut,!1,null,null,null),Xt=Jt.exports,Zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("backOfficeNav"),s("div",{staticClass:"margin5 mt-4"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent"},[s("form",{attrs:{action:"",id:"formBooks"}},[s("div",{staticClass:"row alignLeft mt-2"},[s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputTitle"}},[t._v("Titulo")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",id:"inputTitle"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputCover"}},[t._v("Capa")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.cover,expression:"form.cover"}],staticClass:"form-control",attrs:{type:"text",id:"inputCover"},domProps:{value:t.form.cover},on:{input:function(e){e.target.composing||t.$set(t.form,"cover",e.target.value)}}})]),s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputAuthor"}},[t._v("Autor")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.author,expression:"form.author"}],staticClass:"form-control",attrs:{type:"text",id:"inputAuthor"},domProps:{value:t.form.author},on:{input:function(e){e.target.composing||t.$set(t.form,"author",e.target.value)}}})])]),s("div",{staticClass:"row alignLeft mt-2"},[s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputTitle"}},[t._v("Editora")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.publisher,expression:"form.publisher"}],staticClass:"form-control",attrs:{type:"text",id:"inputTitle"},domProps:{value:t.form.publisher},on:{input:function(e){e.target.composing||t.$set(t.form,"publisher",e.target.value)}}})]),s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputCover"}},[t._v("Tags")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tags,expression:"form.tags"}],staticClass:"form-control",attrs:{type:"text",id:"inputCover"},domProps:{value:t.form.tags},on:{input:function(e){e.target.composing||t.$set(t.form,"tags",e.target.value)}}})]),s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputAuthor"}},[t._v("Data Lançamento")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.launchDate,expression:"form.launchDate"}],staticClass:"form-control",attrs:{type:"text",id:"inputAuthor"},domProps:{value:t.form.launchDate},on:{input:function(e){e.target.composing||t.$set(t.form,"launchDate",e.target.value)}}})])]),s("div",{staticClass:"row alignLeft mt-2"},[s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputTitle"}},[t._v("Descrição")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"form-control",attrs:{type:"text",id:"inputTitle"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})]),s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputCover"}},[t._v("Disponibilidade")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.disponibility,expression:"form.disponibility"}],staticClass:"form-control",attrs:{type:"text",id:"inputCover"},domProps:{value:t.form.disponibility},on:{input:function(e){e.target.composing||t.$set(t.form,"disponibility",e.target.value)}}})]),s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputAuthor"}},[t._v("Estado do livro")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.bookStatus,expression:"form.bookStatus"}],staticClass:"form-control",attrs:{type:"text",id:"inputAuthor"},domProps:{value:t.form.bookStatus},on:{input:function(e){e.target.composing||t.$set(t.form,"bookStatus",e.target.value)}}})]),s("div",{staticClass:"col-4"},[s("button",{staticClass:"btn btn-lg buttonColor mt-3 mb-3",attrs:{type:"button",id:"btnSubmit"},on:{click:t.addBook}},[t._v("Adicionar Livro")])])])])])])]),s("div",{staticClass:"margin5 mt-4"},[t._m(1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent"},[s("form",{staticClass:"mt-4 alignLeft",attrs:{action:""}},[s("label",{staticClass:"ml-2",attrs:{for:"titleFilter"}},[t._v("Filtrar por titulo:")]),s("div",{staticClass:"form-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.titleFilter,expression:"titleFilter"}],staticClass:"form-control ml-2",attrs:{type:"text",id:"titleFilter"},domProps:{value:t.titleFilter},on:{input:function(e){e.target.composing||(t.titleFilter=e.target.value)}}}),s("button",{staticClass:"btn buttonColor ml-4",attrs:{id:"btnLogin"},on:{click:t.filterBooks}},[t._v("Filtrar")])])]),s("table",{staticClass:"table mt-4 table-responsive"},[t._m(2),s("tbody",t._l(t.filteredBooks,function(e){return s("tr",{key:e._id},[t.editBool||e._id!=t.editID?s("td",[t._v(t._s(e.title))]):t._e(),0==t.editBool&&e._id==t.editID?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.title,expression:"edit.title"}],staticClass:"form-control editInput",attrs:{type:"text"},domProps:{value:t.edit.title},on:{input:function(e){e.target.composing||t.$set(t.edit,"title",e.target.value)}}})]):t._e(),t.editBool||e._id!=t.editID?s("td",[s("input",{attrs:{type:"button",value:"+"},on:{click:function(s){t.seeCover(e.cover)}}})]):t._e(),0==t.editBool&&e._id==t.editID?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.cover,expression:"edit.cover"}],staticClass:"form-control editInput",attrs:{type:"text"},domProps:{value:t.edit.cover},on:{input:function(e){e.target.composing||t.$set(t.edit,"cover",e.target.value)}}})]):t._e(),t.editBool||e._id!=t.editID?s("td",[t._v(t._s(e.author))]):t._e(),0==t.editBool&&e._id==t.editID?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.author,expression:"edit.author"}],staticClass:"form-control editInput",attrs:{type:"text"},domProps:{value:t.edit.author},on:{input:function(e){e.target.composing||t.$set(t.edit,"author",e.target.value)}}})]):t._e(),t.editBool||e._id!=t.editID?s("td",[t._v(t._s(e.publisher))]):t._e(),0==t.editBool&&e._id==t.editID?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.publisher,expression:"edit.publisher"}],staticClass:"form-control editInput",attrs:{type:"text"},domProps:{value:t.edit.publisher},on:{input:function(e){e.target.composing||t.$set(t.edit,"publisher",e.target.value)}}})]):t._e(),t.editBool||e._id!=t.editID?s("td",[t._v(t._s(e.tags))]):t._e(),0==t.editBool&&e._id==t.editID?s("td",[s("input",{staticClass:"form-control editInput",attrs:{type:"text"}})]):t._e(),t.editBool||e._id!=t.editID?s("td",[t._v(t._s(e.launchDate))]):t._e(),0==t.editBool&&e._id==t.editID?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.launchDate,expression:"edit.launchDate"}],staticClass:"form-control editInput",attrs:{type:"text"},domProps:{value:t.edit.launchDate},on:{input:function(e){e.target.composing||t.$set(t.edit,"launchDate",e.target.value)}}})]):t._e(),t.editBool||e._id!=t.editID?s("td",[s("input",{attrs:{type:"button",value:"+"},on:{click:function(s){t.seeDescription(e.description)}}})]):t._e(),0==t.editBool&&e._id==t.editID?s("td",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.edit.description,expression:"edit.description"}],staticClass:"form-control editInput",attrs:{type:"text",rows:"5"},domProps:{value:t.edit.description},on:{input:function(e){e.target.composing||t.$set(t.edit,"description",e.target.value)}}})]):t._e(),s("td",[t._v(t._s(e.disponibility))]),t.editBool||e._id!=t.editID?s("td",[t._v(t._s(e.bookStatus))]):t._e(),0==t.editBool&&e._id==t.editID?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.bookStatus,expression:"edit.bookStatus"}],staticClass:"form-control editInput",attrs:{type:"text"},domProps:{value:t.edit.bookStatus},on:{input:function(e){e.target.composing||t.$set(t.edit,"bookStatus",e.target.value)}}})]):t._e(),s("td",[s("button",{staticClass:"btn btn-dark",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.editBook(e._id)}}},[s("i",{staticClass:"fas fa-edit"})])]),s("td",[s("button",{staticClass:"btn btn-danger",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.deleteBook(e._id)}}},[s("i",{staticClass:"fas fa-trash-alt"})])])])}))])])])])],1)},te=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle",attrs:{id:""}},[s("h3",[t._v("Adicionar Livro")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle",attrs:{id:""}},[s("h3",[t._v("Livros")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Titulo")]),s("th",{attrs:{scope:"col"}},[t._v("Capa")]),s("th",{attrs:{scope:"col"}},[t._v("Autor")]),s("th",{attrs:{scope:"col"}},[t._v("Editora")]),s("th",{attrs:{scope:"col"}},[t._v("Tag")]),s("th",{attrs:{scope:"col"}},[t._v("Data")]),s("th",{attrs:{scope:"col"}},[t._v("Descriçao")]),s("th",{attrs:{scope:"col"}},[t._v("Disponibilidade")]),s("th",{attrs:{scope:"col"}},[t._v("Estado")]),s("th",{attrs:{scope:"col"}},[t._v("Ações")]),s("th",{attrs:{scope:"col"}})])])}],ee={components:{backOfficeNav:Yt},data:function(){return{books:[],editBool:!0,editID:0,created:!1,edit:{title:"",author:"",publisher:"",launchDate:"",bookStatus:""},filteredBooks:[],titleFilter:"",form:this.$store.state.form}},created:function(){var t=this;f.a.get("https://owl-server-pw2.herokuapp.com/books").then(function(e){t.books=e.data,t.filteredBooks=e.data,console.log("books:"),console.log(t.books)}).catch(function(t){console.log(t)})},methods:{seeDescription:function(t){M()({type:"info",title:"Descrição",text:t,showConfirmButton:!0})},seeCover:function(t){M()({title:"Url",text:t,html:'<img src="'+t+'" alt="" class="coverSize"><p class="mt-1">'+t+"</p>",showConfirmButton:!0,showCancelButton:!0,cancelButtonText:"Edit",cancelButtonColor:"#592316"}).then(function(t){"cancel"==t.dismiss&&console.log("oi")})},editBook:function(t){for(var e=0;e<this.books.length;e++)if(this.books[e]._id===t)if(0==this.created&&(this.edit.title=this.books[e].title,this.edit.author=this.books[e].author,this.edit.publisher=this.books[e].publisher,this.edit.cover=this.books[e].cover,this.edit.description=this.books[e].description,this.created=!0),this.editBool&&this.created)this.editID=t,this.edit.title=this.books[e].title,this.edit.author=this.books[e].author,this.edit.publisher=this.books[e].publisher,this.edit.cover=this.books[e].cover,this.edit.description=this.books[e].description,this.editBool=!1;else{this.editBool=!0,this.editID=e;var s="https://owl-server-pw2.herokuapp.com/books/"+this.books[e]._id;f.a.put(s,{title:this.edit.title,author:this.edit.author,publisher:this.edit.publisher,cover:this.edit.cover,description:this.edit.description,launchDate:this.edit.launchDate,bookStatus:this.edit.bookStatus}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.books[e].title=this.edit.title,this.books[e].author=this.edit.author,this.books[e].publisher=this.edit.publisher,this.books[e].cover=this.edit.cover,this.books[e].description=this.edit.description,this.books[e].launchDate=this.edit.launchDate,this.books[e].bookStatus=this.edit.bookStatus,M()({type:"success",title:"Livro editado com sucesso."})}},deleteBook:function(t){var e=this;M()({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(s){if(s.value)for(var o=0;o<e.books.length;o++)if(e.books[o]._id===t){var i="https://owl-server-pw2.herokuapp.com/books/"+e.books[o]._id;f.a.delete(i).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),e.books.splice(o,1),M()("Deleted!","Book has been deleted.","success")}})},addBook:function(){f.a.post("https://owl-server-pw2.herokuapp.com/books",{cover:this.form.cover,title:this.form.title,author:this.form.author,publisher:this.form.publisher,idTag:this.form.tags,launchDate:this.form.launchDate,nPages:100,description:this.form.description,nViews:100,availability:!0,bookStatus:this.form.bookStatus}).then(function(t){console.log("entrou"),console.log(t)}).catch(function(t){console.log(t)}),this.books.push({bookId:null,cover:this.form.cover,title:this.form.title,author:this.form.author,publisher:this.form.publisher,idTag:this.form.tags,launchDate:this.form.launchDate,nPages:100,description:this.form.description,nViews:100,availability:!0,bookStatus:this.form.bookStatus}),M()({type:"success",title:"Livro adicionado com sucesso."}),this.form={}},filterBooks:function(){this.filteredBooks=[];for(var t=!1,e=0;e<this.books.length;e++){var s=this.books[e].title.toUpperCase(),o=this.titleFilter.toUpperCase();t=s.includes(o),t&&this.filteredBooks.push(this.books[e])}}}},se=ee,oe=(s("0a91"),Object(l["a"])(se,Zt,te,!1,null,null,null)),ie=oe.exports,ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("backOfficeNav"),s("div",{staticClass:"margin5 mt-4"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent",attrs:{id:""}},[s("form",{attrs:{action:"",id:"formTags"}},[s("div",{staticClass:"row alignLeft mt-2"},[s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"inputTag"}},[t._v("Categoria")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticClass:"form-control",attrs:{type:"text",id:"inputTag"},domProps:{value:t.tag},on:{input:function(e){e.target.composing||(t.tag=e.target.value)}}})]),s("div",{staticClass:"col-4 mt-3"},[s("button",{staticClass:"btn btn-lg mt-3 mb-3 buttonColor",attrs:{type:"button",id:"btnSubmit"},on:{click:t.addTag}},[t._v("Adicionar Tag")])])])])])])]),s("div",{staticClass:"margin5 mt-4"},[t._m(1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent"},[s("form",{staticClass:"mt-4 alignLeft",attrs:{action:""}},[s("label",{staticClass:"ml-2",attrs:{for:"tagFilter"}},[t._v("Filtrar por Tag:")]),s("div",{staticClass:"form-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tagFilter,expression:"tagFilter"}],staticClass:"form-control ml-2",attrs:{type:"text",id:"tagFilter"},domProps:{value:t.tagFilter},on:{input:function(e){e.target.composing||(t.tagFilter=e.target.value)}}}),s("button",{staticClass:"btn buttonColor ml-4",attrs:{id:"btnLogin"},on:{click:t.filterTags}},[t._v("Filtrar")])])]),s("table",{staticClass:"table mt-4 table-responsive"},[t._m(2),s("tbody",t._l(t.filteredTags,function(e){return s("tr",{key:e.tagId},[t.editBool||e._id!=t.editID?s("td",[t._v(t._s(e.tagDescription))]):t._e(),0==t.editBool&&e._id==t.editID?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.tagDescription,expression:"edit.tagDescription"}],staticClass:"form-control editInput",attrs:{type:"text"},domProps:{value:t.edit.tagDescription},on:{input:function(e){e.target.composing||t.$set(t.edit,"tagDescription",e.target.value)}}})]):t._e(),s("td",[s("button",{staticClass:"btn btn-dark",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.editTag(e._id)}}},[s("i",{staticClass:"fas fa-edit"})])]),s("td",[s("button",{staticClass:"btn btn-danger",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.deleteTag(e._id)}}},[s("i",{staticClass:"fas fa-trash-alt"})])])])}))])])])])],1)},re=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle",attrs:{id:""}},[s("h3",[t._v("Adicionar Tag")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle",attrs:{id:""}},[s("h3",[t._v("Tags")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Tag")]),s("th",{attrs:{scope:"col"}},[t._v("Ações")]),s("th",{attrs:{scope:"col"}})])])}],ne={components:{backOfficeNav:Yt},data:function(){return{tags:[],tag:"",edit:{tagDescription:""},editBool:!0,editID:0,created:!1,filteredTags:[],tagFilter:""}},created:function(){var t=this;console.log("entrou"),f.a.get("https://owl-server-pw2.herokuapp.com/tags").then(function(e){t.tags=e.data,t.filteredTags=e.data,console.log("tags:"),console.log(t.tags)}).catch(function(t){console.log(t)})},methods:{editTag:function(t){for(var e=!1,s=!1,o=0,i=0;i<this.tags.length;i++)if(this.tags[i]._id===t)if(0==this.created&&(this.edit.tagDescription=this.tags[i].tagDescription,this.created=!0),this.editBool&&this.created)this.editID=t,this.edit.tagDescription=this.tags[i].tagDescription,this.editBool=!1;else{s=!0,console.log("d"),o=i;for(var a=0;a<this.tags.length;a++)console.log(this.edit.tagDescription),this.tags[a].tagDescription===this.edit.tagDescription&&a!=i&&(e=!0)}if(e)M()({type:"error",title:"Tag já existente."});else if(s){this.editBool=!0;var r="https://owl-server-pw2.herokuapp.com/tags/"+this.tags[o]._id;console.log(this.tags[o]._id),f.a.put(r,{tagDescription:this.edit.tagDescription}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.tags[o].tagDescription=this.edit.tagDescription,M()({type:"success",title:"Tag editada com sucesso."})}},deleteTag:function(t){var e=this;M()({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(s){if(s.value)for(var o=0;o<e.tags.length;o++)if(e.tags[o]._id===t){var i="https://owl-server-pw2.herokuapp.com/tags/"+e.tags[o]._id;console.log("entrou"),f.a.delete(i).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),e.tags.splice(o,1),M()("Deleted!","Tag has been deleted.","success")}})},addTag:function(){for(var t=!1,e=0;e<this.tags.length;e++)this.tags[e].tagDescription===this.tag&&(t=!0);t?(M()({type:"error",title:"Tag já existente."}),document.getElementById("formTags").reset()):(f.a.post("https://owl-server-pw2.herokuapp.com/tags",{tagDescription:this.tag}).then(function(t){console.log("entrou"),console.log(t)}).catch(function(t){console.log(t)}),this.tags.push({tagId:null,tagDescription:this.tag}),M()({type:"success",title:"Tag adicionada com sucesso."}),document.getElementById("formTags").reset())},filterTags:function(){this.filteredTags=[];for(var t=!1,e=0;e<this.tags.length;e++){var s=this.tags[e].tagDescription.toUpperCase(),o=this.tagFilter.toUpperCase();t=s.includes(o),t&&this.filteredTags.push(this.tags[e])}}}},le=ne,ce=Object(l["a"])(le,ae,re,!1,null,null,null),ue=ce.exports,de=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("backOfficeNav"),s("div",{staticClass:"margin5 mt-4"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxContent"},[s("table",{staticClass:"table mt-4 table-responsive"},[t._m(1),s("tbody",t._l(t.bookSuggestions,function(e){return s("tr",{key:e.bookSuggestionId},[s("td",[t._v(t._s(e.suggestionId))]),s("td",[t._v(t._s(e.suggestionTitle))]),s("td",[s("input",{attrs:{type:"button",value:"+"},on:{click:function(s){t.seeCover(e.suggestionCover)}}})]),s("td",[t._v(t._s(e.suggestionAuthor))]),t._l(t.users,function(o){return s("div",{key:o.userID},[o.userId==e.userId?s("td",[t._v(t._s(o.firstName)+" "+t._s(o.lastName))]):t._e()])}),s("td",[t._v(t._s(e.suggestionDate))]),s("td",[t._v(t._s(e.suggestNumber))]),s("td",[s("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.confirmSuggestion(e._id)}}},[s("i",{staticClass:"fas fa-check"})])]),s("td",[s("button",{staticClass:"btn btn-dark",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.addSuggestion(e._id)}}},[s("i",{staticClass:"fas fa-plus"})])]),s("td",[s("button",{staticClass:"btn btn-danger",staticStyle:{color:"white"},attrs:{type:"button"},on:{click:function(s){t.deleteSuggestion(e._id)}}},[s("i",{staticClass:"fas fa-trash-alt"})])])],2)}))])])])])],1)},ge=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 boxTitle"},[s("h3",[t._v("Sugestões")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Id")]),s("th",{attrs:{scope:"col"}},[t._v("Titulo")]),s("th",{attrs:{scope:"col"}},[t._v("Capa")]),s("th",{attrs:{scope:"col"}},[t._v("Autor")]),s("th",{attrs:{scope:"col"}},[t._v("Utilizador")]),s("th",{attrs:{scope:"col"}},[t._v("Data")]),s("th",{attrs:{scope:"col"}},[t._v("Nº Sugestões")]),s("th",{attrs:{scope:"col"}},[t._v("Ações")]),s("th",{attrs:{scope:"col"}}),s("th",{attrs:{scope:"col"}})])])}],he={components:{backOfficeNav:Yt},data:function(){return{bookSuggestions:[],users:[],books:[],form:this.$store.state.form,username:"",tempSuggestions:[]}},created:function(){var t=this;f.a.get("https://owl-server-pw2.herokuapp.com/bookSuggestions").then(function(e){t.bookSuggestions=e.data,console.log("tags:"),console.log(t.tags)}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/books").then(function(e){t.books=e.data,console.log("books:"),console.log(t.books)}).catch(function(t){console.log(t)}),f.a.get("https://owl-server-pw2.herokuapp.com/users").then(function(e){t.users=e.data,console.log("users:"),console.log(t.users)}).catch(function(t){console.log(t)})},methods:{seeCover:function(t){M()({title:"Capa",html:'<img src="'+t+'" alt="" class="coverSize"></p>',showConfirmButton:!0})},deleteSuggestion:function(t){var e=this;M()({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(s){if(s.value)for(var o=0;o<e.bookSuggestions.length;o++)if(e.bookSuggestions[o]._id===t){var i="https://owl-server-pw2.herokuapp.com/bookSuggestions/"+e.bookSuggestions[o]._id;f.a.delete(i).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),e.bookSuggestions.splice(o,1),M()("Deleted!","Suggestion has been deleted.","success")}})},confirmSuggestion:function(t){for(var e=this,s=!1,o=0;o<this.bookSuggestions.length;o++)if(this.bookSuggestions[o]._id===t)for(var i=0;i<this.books.length;i++)this.bookSuggestions[o].suggestionTitle==this.books[i].title&&(s=!0);s?M()({type:"error",title:"Livro existente no catalálogo."}).then(function(s){M()({title:"Quer eliminar a sugestão?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, eliminar!"}).then(function(s){if(s.value)for(var o=0;o<e.bookSuggestions.length;o++)if(e.bookSuggestions[o]._id===t){var i="https://owl-server-pw2.herokuapp.com/bookSuggestions/"+e.bookSuggestions[o]._id;f.a.delete(i).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),e.bookSuggestions.splice(o,1),M()("Deleted!","Suggestion has been deleted.","success")}})}):M()({type:"success",title:"Livro não existe no catalálogo."})},addSuggestion:function(t){for(var e=0;e<this.bookSuggestions.length;e++)this.bookSuggestions[e]._id===t&&(this.form.title=this.bookSuggestions[e].suggestionTitle,this.form.cover=this.bookSuggestions[e].suggestionCover,this.form.author=this.bookSuggestions[e].suggestionAuthor);this.$router.push("/books")},filterSuggestions:function(){for(var t=0;t<this.bookSuggestions.length;t++)if(-1==this.tempSuggestions.indexOf(this.bookSuggestions[t].suggestionTitle)){console.log(t),this.tempSuggestions.push(this.bookSuggestions[t]);break}return this.tempSuggestions}}},me=he,ve=Object(l["a"])(me,de,ge,!1,null,null,null),pe=ve.exports;o["default"].use(d["a"]);var fe=new d["a"]({routes:[{path:"/",name:"home",component:B},{path:"/home2",name:"home2",component:$t},{path:"/login",name:"login",component:pt},{path:"/signup",name:"signup",component:Ct},{path:"/catalog",name:"catalog",component:P},{path:"/profile2",name:"profile2",component:z},{path:"/book/:id",name:"book",component:J},{path:"/rankings",name:"rankings",component:ot},{path:"/profile",name:"profile",component:St},{path:"/suggest",name:"suggest",component:ct},{path:"/users",name:"users",component:Xt},{path:"/books",name:"books",component:ie},{path:"/tags",name:"tags",component:ue},{path:"/suggestions",name:"suggestions",component:pe},{path:"/achievements",name:"achievements",component:At}]}),be=s("ade3"),_e=s("2f62");o["default"].use(_e["a"]);var ke=new _e["a"].Store({state:{userLoggedin:-1,loggedIn:!1,currentBookId:0,form:{title:"",cover:"",author:"",publisher:"",tags:[],launchDate:"",description:"",disponibility:"",bookStatus:""},users:[{userId:0,firstName:"Rogério",lastName:"Silva",email:"rs@gmail.com",password:"123456",ableToRequest:!0,type:"admin",nRequisitionsNow:0,photo:"https://i.imgur.com/6NIOn6z.jpg",points:500,favTags:[0]},{userId:1,firstName:"Oscar",lastName:"Sousa",email:"os@gmail.com",password:"123456",ableToRequest:!0,type:"user",nRequisitionsNow:0,photo:"https://i.imgur.com/6NIOn6z.jpg",points:500,favTags:[0,1]},{userId:2,firstName:"Bernardo",lastName:"Ferreira",email:"bf@gmail.com",password:"123456",ableToRequest:!0,type:"user",nRequisitionsNow:0,photo:"https://i.imgur.com/6NIOn6z.jpg",points:100,favTags:[0,1]},{userId:3,firstName:"Antonio",lastName:"Rocha",email:"ar@gmail.com",password:"123456",ableToRequest:!0,type:"user",nRequisitionsNow:0,photo:"https://i.imgur.com/6NIOn6z.jpg",points:350,favTags:[0,1]},{userId:4,firstName:"Rodrigo",lastName:"Queiros",email:"rq@gmail.com",password:"123456",ableToRequest:!0,type:"user",nRequisitionsNow:0,photo:"https://i.imgur.com/6NIOn6z.jpg",points:300,favTags:[0,1]}],books:[{bookId:0,cover:"https://images-na.ssl-images-amazon.com/images/I/51HSkTKlauL._SX346_BO1,204,203,200_.jpg",title:"Harry Potter and the Sorcerer's Stone",author:"J.K. Rowling",publisher:"Scholastic",idTag:[1],launchDate:"",nPages:100,description:"Em 2016 chega-nos em português o novo livro de Harry Potter, o célebre personagem de J.K. Rowling. Harry Potter e a Criança Amaldiçoada (Harry Potter and the Cursed Child) traz de volta as personagens mais carismáticas da série: Harry, Ron e Herminone, agora adultos, mas também os respetivos filhos e com estes desafios novos… e antigos:",nViews:100,availability:!0,bookStatus:"Good"},{bookId:1,cover:"https://img.bertrand.pt/images/sangue-e-fogo---a-historia-dos-reis-targaryen-george-r-r-martin/NDV8MjI2MTk0NjV8MTg0OTc1NTl8MTU0NjQ3MzYwMDAwMA==/502x",title:"Sangue e Fogo - A História dos Reis Targaryen",author:"George R. R. Martin",publisher:"Scholastic",idTag:[1],launchDate:"",nPages:100,description:"nfdljanfjlsahjlsdç",nViews:100,availability:!0,bookStatus:"Good"},{bookId:2,cover:"https://img.bertrand.pt/images/onde-caem-os-anjos-nora-roberts/NDV8MTk3MDA3OTl8MTU1MzEwODN8MTQ5OTM4MjAwMDAwMA==/502x",title:"Onde Caem os Anjos",author:"Nora Roberts",publisher:"Scholastic",idTag:[1],launchDate:"",nPages:100,description:"",nViews:100,availability:!0,bookStatus:"Good"},{bookId:3,cover:"https://images-na.ssl-images-amazon.com/images/I/51z3fT5zLvL._SX390_BO1,204,203,200_.jpg",title:"Fullstack Vue: The Complete Guide to Vue.js",author:"Hassan Djirdeh",publisher:"CreateSpace Independent Publishing Platform",idTag:[1],launchDate:"",nPages:320,description:"",nViews:200,availability:!1,bookStatus:"Worn"},Object(be["a"])({bookId:4,cover:"https://img.wook.pt/images/duelo-nunca-visto-luciano-wernick/MXwyMjI2NzcxNXwxODE2MDUzOXwxNTM3Mzk4MDAwMDAw/502x",title:"Duelo Nunca Visto",author:"Luís Miguel Pereira",publisher:"Prime Books",idTag:[0,1],launchDate:"",nPages:100,description:"",nViews:600,availability:!0,bookStatus:"Good"},"description","Nunca o futebol mundial assistiu a um duelo tão equilibrado. Fruto de uma aturada investigação, este livro apresenta pela primeira vez os dois jogadores, comparando-os relativamente a mais de 30 diferentes fatores. "),Object(be["a"])({bookId:5,cover:"https://img.wook.pt/images/programacao-em-java-pedro-coelho/MXwxODM1MDgwMHwxNDA0MTg5NHwxNDY5MDU1NjAwMDAw/502x",title:"Programação em Java",author:"Luís Miguel Pereira",publisher:"Prime Books",idTag:[0],launchDate:"",nPages:100,description:"",nViews:550,availability:!0,bookStatus:"Good"},"description","Nesta altura em que o Java se afirma em múltiplos ambientes de desenvolvimento e em que as interfaces por plug-in começam a ser descontinuadas nos browsers, surge esta obra com vários exemplos práticos, escrita de forma simples e acessível, destinada a todos aqueles que possuem conhecimentos básicos de programação em outras linguagens e queiram aprender Java.")],reviews:[{reviewId:0,bookId:0,userId:0,rating:4,date:"2018-07-11",comment:"This is a review test test. This is a review test test. This is a review test test. This is a review test test.This is a review test test.",upVote:[3,4,5],downVote:[1]},{reviewId:1,bookId:0,userId:1,rating:4,date:"2018-07-11",comment:"This is a review test test. This is a review test test. This is a review test test. This is a review test test. This is a review test test. ",upVote:[2,5,6,7],downVote:[4,5,6]}],requisitions:[{requisitionId:0,bookId:2,userId:0,requisitionDate:"Wed Jun 15 2019 20:29:40 GMT+0100 (Western European Summer Time)",deliveryDate:"",deliveryBookStatus:"",active:!0},{requisitionId:1,bookId:0,userId:0,requisitionDate:"Wed Jun 19 2019 20:29:40 GMT+0100 (Western European Summer Time)",deliveryDate:"",deliveryBookStatus:"",active:!1},{requisitionId:1,bookId:0,userId:0,requisitionDate:"Wed Jun 19 2019 20:29:40 GMT+0100 (Western European Summer Time)",deliveryDate:"",deliveryBookStatus:"",active:!0}],tags:[{tagId:0,tagDescription:"Desporto"},{tagId:1,tagDescription:"Ciência"}],bookSuggestions:[{suggestionId:0,suggestionTitle:"Foi Sem Querer Que Te Quis",suggestionAuthor:"Raul Minh'alma",suggestionCover:"https://img.wook.pt/images/foi-sem-querer-que-te-quis-raul-minhalma/MXwyMjM1ODA1OXwxODI0MDkxN3wxNTQwMTYyODAwMDAw/502x",userId:1,suggestionDate:(new Date).toLocaleString(),suggestNumber:1}],notifications:[{notificationId:0,userId:0,type:"bookAvailable",bookId:3,show:!1}],achievements:{type1:[1,5,20,2,10,50,6,60,100,200,1e3,5e3],text1:["Fazer "," requisições"],text2:["Fazer "," reviews"],text3:["Fazer "," upvotes"],text4:["Atingir "," pontos"]}},getters:{Login:function(t){return function(e){for(var s=!1,o=0;o<t.users.length;o++)t.users[o].email==e.email&&t.users[o].password==e.password&&(s=!0,t.userLoggedin=t.users[o].userId,localStorage.setItem("userLoggedIn",t.userLoggedin));return s}},Signup:function(t){return function(e){for(var s="",o=0;o<t.users.length;o++)t.users[o].email==e.email&&(s+="Email já existe /n"),e.password!=e.password2&&(s+="Passwords diferentes /n");return s}},getLastId:function(t){var e=0;return t.users.length>0&&(e=t.users[t.users.length-1].userId+1),e},getLastIdReq:function(t){var e=0;return t.requisitions.length>0&&(e=t.requisitions[t.requisitions.length-1].requisitionId+1),e},getLastIdBooks:function(t){var e=0;return t.books.length>0&&(e=t.books[t.books.length-1].bookId+1),e},getLastIdSuggestions:function(t){var e=0;return t.bookSuggestions.length>0&&(e=t.bookSuggestions[t.bookSuggestions.length-1].suggestionId+1),e},getLastIdTags:function(t){var e=0;return t.tags.length>0&&(e=t.tags[t.tags.length-1].tagId+1),e},getUserLoggedIn:function(t){return t.userLoggedin},ClickedBook:function(t){return t.ClickedBook},books:function(t){return t.books},requisitions:function(t){return t.requisitions},users:function(t){return t.users},reviews:function(t){return t.reviews}},mutations:{open_book:function(t,e){t.currentBookId=e},UP_VOTE:function(t,e){for(var s=0;s<t.reviews.length;s++)if(t.reviews[s].reviewId==e[0])if(e[2]){if(t.reviews[s].upVote.push(e[1]),0==e[3])for(var o=0;o<t.reviews[s].downVote.length;o++)t.reviews[s].downVote[o]==e[1]&&t.reviews[s].downVote.splice(o,1)}else for(var i=0;i<t.reviews[s].upVote.length;i++)t.reviews[s].upVote[i]==e[1]&&t.reviews[s].upVote.splice(i,1)},DOWN_VOTE:function(t,e){console.log("Ola");for(var s=0;s<t.reviews.length;s++)if(t.reviews[s].reviewId==e[0])if(e[2]){if(t.reviews[s].downVote.push(e[1]),0==e[3])for(var o=0;o<t.reviews[s].upVote.length;o++)t.reviews[s].upVote[o]==e[1]&&t.reviews[s].upVote.splice(o,1)}else for(var i=0;i<t.reviews[s].downVote.length;i++)t.reviews[s].downVote[i]==e[1]&&t.reviews[s].downVote.splice(i,1)},DELETE_REVIEW:function(t,e){t.reviews.splice(e,1)},ADD_USER:function(t,e){t.users.push(e)},DELETE_BOOK:function(t,e){t.books.splice(e,1)},ADD_BOOK:function(t,e){t.books.push(e)},DELETE_USER:function(t,e){t.users.splice(e,1)},ADD_ADMIN:function(t,e){t.users[e].type="admin"},DELETE_ADMIN:function(t,e){t.users[e].type="user"},LET_REQUEST:function(t,e){t.users[e].ableToRequest=!0},DENY_REQUEST:function(t,e){t.users[e].ableToRequest=!1},ADD_SUGGESTION:function(t,e){t.bookSuggestions.push(e)},ADD_SUGGESTION_NUMBER:function(t,e){t.bookSuggestions[e].suggestNumber+=1},EDIT_BOOK:function(t,e){t.books[e.bookId].author=e.author,t.books[e.bookId].title=e.title,t.books[e.bookId].publisher=e.publisher,t.books[e.bookId].cover=e.cover,t.books[e.bookId].description=e.description,t.books[e.bookId].launchDate=e.launchDate,t.books[e.bookId].bookStatus=e.bookStatus},EDIT_PROFILE:function(t,e){t.users[e.userId].firstName=e.firstName,t.users[e.userId].lastName=e.lastName,t.users[e.userId].email=e.email,t.users[e.userId].photo=e.photo},EDIT_TAG:function(t,e){t.tags[e.tagId].tagDescription=e.tagDescription},DELETE_TAG:function(t,e){t.tags.splice(e,1)},ADD_TAG:function(t,e){t.tags.push(e)},ADD_VIEW:function(t,e){t.books[e].nViews+=1},DELETE_SUGGESTION:function(t,e){t.bookSuggestions.splice(e,1)},ADD_REQ:function(t,e){t.requisitions.push(e[0]),t.requisitions[e[1]].availability=!1},DELIVERY_BOOK:function(t,e){t.requisitions[e[0]].active=!1,t.users[e[1]].points+=e[2],t.requisitions[e[3]].availability=!0,t.requisitions[e[3]].deliveryDate=e[4]},EDIT_REVIEW:function(t,e){t.reviews[e[0]].comment=e[1]},DO_REVIEW:function(t,e){t.reviews.push(e),t.users[e.userId].points+=20},ADD_NOTIFICATION:function(t,e){t.notifications.push(e)},NOTF_SHOW:function(t,e){t.notifications[e].show=!0},UPDATE_FAVTAGS:function(t,e){t.users[e[0]].favTags=e[1]}},actions:{notf_show:function(t,e){t.commit("NOTF_SHOW",e)},add_notification:function(t,e){t.commit("ADD_NOTIFICATION",e)},do_review:function(t,e){t.commit("DO_REVIEW",e)},edit_review:function(t,e){t.commit("EDIT_REVIEW",e)},delivery_book:function(t,e){t.commit("DELIVERY_BOOK",e)},add_req:function(t,e){t.commit("ADD_REQ",e)},delete_review:function(t,e){t.commit("DELETE_REVIEW",e)},open_book:function(t,e){t.commit("open_book",e)},add_user:function(t,e){t.commit("ADD_USER",e)},up_vote:function(t,e){t.commit("UP_VOTE",e)},down_vote:function(t,e){t.commit("DOWN_VOTE",e)},delete_book:function(t,e){t.commit("DELETE_BOOK",e)},add_book:function(t,e){t.commit("ADD_BOOK",e)},delete_user:function(t,e){t.commit("DELETE_USER",e)},add_admin:function(t,e){t.commit("ADD_ADMIN",e)},delete_admin:function(t,e){t.commit("DELETE_ADMIN",e)},let_request:function(t,e){t.commit("LET_REQUEST",e)},deny_request:function(t,e){t.commit("DENY_REQUEST",e)},add_suggestion:function(t,e){t.commit("ADD_SUGGESTION",e)},add_suggestion_number:function(t,e){t.commit("ADD_SUGGESTION_NUMBER",e)},edit_book:function(t,e){t.commit("EDIT_BOOK",e)},edit_profile:function(t,e){t.commit("EDIT_PROFILE",e)},edit_tag:function(t,e){t.commit("EDIT_TAG",e)},delete_tag:function(t,e){t.commit("DELETE_TAG",e)},add_tag:function(t,e){t.commit("ADD_TAG",e)},add_view:function(t,e){t.commit("ADD_VIEW",e)},delete_suggestion:function(t,e){t.commit("DELETE_SUGGESTION",e)},update_favtags:function(t,e){t.commit("UPDATE_FAVTAGS",e)}}}),we=s("5f5b"),Ce=s("331b");o["default"].config.productionTip=!1,o["default"].use(we["a"]),o["default"].use(Ce["a"]),new o["default"]({router:fe,store:ke,render:function(t){return t(u)}}).$mount("#app")},"58a6":function(t,e,s){},"5e11":function(t,e,s){},"64a9":function(t,e,s){},"760c":function(t,e,s){"use strict";var o=s("b675"),i=s.n(o);i.a},"9f6f":function(t,e,s){"use strict";var o=s("fcb7"),i=s.n(o);i.a},ae14:function(t,e,s){"use strict";var o=s("f76e"),i=s.n(o);i.a},afa0:function(t,e,s){"use strict";var o=s("4e38"),i=s.n(o);i.a},b675:function(t,e,s){},b9bd:function(t,e,s){},c140:function(t,e,s){},c48f:function(t,e,s){"use strict";var o=s("3a6b"),i=s.n(o);i.a},c956:function(t,e,s){},c96d:function(t,e,s){},cf05:function(t,e,s){t.exports=s.p+"img/logo.e7ab64a9.png"},e110:function(t,e,s){"use strict";var o=s("c956"),i=s.n(o);i.a},f76e:function(t,e,s){},fa59:function(t,e,s){"use strict";var o=s("c96d"),i=s.n(o);i.a},fab9:function(t,e,s){"use strict";var o=s("c140"),i=s.n(o);i.a},fcb7:function(t,e,s){},fe00:function(t,e,s){"use strict";var o=s("1bf7"),i=s.n(o);i.a}});
//# sourceMappingURL=app.8cd5c59e.js.map